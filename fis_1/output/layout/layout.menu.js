define("layout/menu",["leaflet","layout/base","core/namespace","func/tshf","func/oceanWeather","func/abnormalAlarm","func/monitorStatisc","func/filterDisplay","func/wjAnalysis"],function(n){n.ICT.Menu=n.Class.extend({mainmenu:null,submenu:null,initialize:function(){this._container=$("#menupanel"),this.mainmenu=new n.ICT.Layout.MainMenu,this.submenu=new n.ICT.Layout.SubMenu},show:function(){this._container.css("display","block")},hide:function(){this._container.css("display","none")},refresh:function(){},clear:function(){},getContainer:function(){return this._container}}),n.ICT.Layout.MainMenu=n.ICT.Layout.extend({_data:[{id:"ict_menu_main_tshf","class":"menu_item",name:"态势回放",imgUrl:"themes/images/frame/menu_tshf.png",Handler:"",hasSub:!0,available:!0},{id:"ict_menu_main_jktj","class":"menu_item",name:"监控统计",imgUrl:"themes/images/frame/menu_jktj.png",Handler:"",hasSub:!1,available:!0},{id:"ict_menu_main_ycgj","class":"menu_item",name:"异常告警",imgUrl:"themes/images/frame/menu_ycgj.png",Handler:"",hasSub:!1,available:!0},{id:"ict_menu_main_xwwj","class":"menu_item",name:"行为挖掘",imgUrl:"themes/images/frame/menu_xwfx.png",Handler:"",hasSub:!0,available:!0},{id:"ict_menu_main_gkxx","class":"menu_item",name:"港口信息",imgUrl:"themes/images/frame/menu_gk.png",Handler:"",hasSub:!1,available:!0},{id:"ict_menu_main_hyqx","class":"menu_item",name:"海洋气象",imgUrl:"themes/images/frame/menu_ocean_weather.png",Handler:"",hasSub:!0,available:!0},{id:"ict_menu_main_glxs","class":"menu_item",name:"过滤显示",imgUrl:"themes/images/frame/menu_mbsx.png",Handler:"",hasSub:!0,available:!0},{id:"ict_menu_main_qpxs","class":"menu_item",name:"全屏显示",imgUrl:"themes/images/frame/menu_max.png",Handler:"",hasSub:!1,available:!0}],_menuSubs:[],initialize:function(){n.ICT.Layout.prototype.initialize.call(this),this._container=$(".menu_main_panel"),this._init()},_getMainMenuHTML:function(){var n=[],e=this._data;for(n.push('<ul class="menu_main">'),i=0,len=e.length;len>i;i++)n.push('<li id="'+e[i].id+'" class="'+e[i].class+'" title="'+e[i].name+'" data-available="'+e[i].available+'" data-sub="'+e[i].hasSub+'">'),n.push('<img alt src="'+e[i].imgUrl+'">'),n.push("</li>");return n.push("</ul>"),n.join("")},_init:function(){var n=this._getMainMenuHTML();this._container.html(n);for(var e=this._data,i=0,a=e.length;a>i;i++)e[i].available?this.enableMenu(e[i].id):this.disableMenu(e[i].id)},_menuItemClickHandler:function(n){n.stopPropagation();var e=n.data.context;$this=$(n.currentTarget),menuid=$this.attr("id"),menuitem=e.getMenuItemById(menuid),isactive=$this.hasClass("active"),$this.toggleClass("active"),e.menuHandler(menuid,!isactive)},menuHandler:function(e,i){switch(e){case"ict_menu_main_tshf":i?n.ICT.Func.TSHFMoreShip.run():n.ICT.Func.TSHFMoreShip.close();break;case"ict_menu_main_jktj":i?n.ICT.Func.MonitorStatisc.run():n.ICT.Func.MonitorStatisc.close();break;case"ict_menu_main_ycgj":i?n.ICT.Func.AbnormalAlarm.run():n.ICT.Func.AbnormalAlarm.close();break;case"ict_menu_main_xwwj":i?n.ICT.Func.WJAnalysis.run():n.ICT.Func.WJAnalysis.close();break;case"ict_menu_main_gkxx":i?n.ICT.Func.PortInfo.run():n.ICT.Func.PortInfo.close();break;case"ict_menu_main_hyqx":i?n.ICT.Func.OceanWeather.run():n.ICT.Func.OceanWeather.close();break;case"ict_menu_main_glxs":i?n.ICT.Func.FilterDisplay.run():n.ICT.Func.FilterDisplay.close();break;case"ict_menu_main_qpxs":}},activeMenu:function(n){this._container.find("#"+n).hasClass("active")||(this._container.find("#"+n).addClass("active"),this.menuHandler(n,!0))},deactiveMenu:function(n){this._container.find("#"+n).hasClass("active")&&(this._container.find("#"+n).removeClass("active"),this.menuHandler(n,!1))},deactiveMenuExceptOne:function(n){for(var e=this._data,i=0,a=e.length;a>i;i++){var t=e[i].id;t!==n&&this._container.find("#"+t).hasClass("active")&&(this._container.find("#"+t).removeClass("active"),this.menuHandler(t,!1))}},disableMenu:function(n){"undefined"===$.type(n)?this._container.find(".menu_item").off("click"):this._container.find("#"+n).off("click")},disableMenuExceptOne:function(n){"undefined"===$.type(n)?this._container.find(".menu_item").off("click"):this._container.find(".menu_item:not(#"+n+")").off("click")},enableMenu:function(n){"undefined"===$.type(n)?(this._container.find(".menu_item").off("click"),this._container.find(".menu_item").on("click",{context:this},this._menuItemClickHandler)):(this._container.find("#"+n).off("click"),this._container.find("#"+n).on("click",{context:this},this._menuItemClickHandler))},getMenuItemById:function(n){for(var e=this._data,i=0,a=e.length;a>i;i++)if(e[i].id===n)return e[i]},getMenuSub:function(e){var i=null;if("ict_menu_main_tshf"===e){var a="";i=new n.ICT.Layout.SubMenu(a)}return i}}),n.ICT.Layout.SubMenu=n.ICT.Layout.extend({_data:{},initialize:function(){n.ICT.Layout.prototype.initialize.call(this),this._container=$(".menu_sub_panel"),this._isShow=!1,this._data={}},_init:function(){this._container.html(this._html)},show:function(n){var e=this._data[n];this._container.html(e),this._container.css("display","block")},hide:function(){this._container.css("display","none")},add:function(n,e){var i=e;"string"==typeof e&&(i=$(e)),this._data[n]=i},has:function(n){return this._data.hasOwnProperty(n)?!0:!1},update:function(n,e){this._html=e,this._init(),this.show()},destory:function(n){this.hide(),delete this._data[n]}})});