define("control/draw",["leaflet","leaflet/draw","core/namespace"],function(t){t.ICT.Draw=t.Class.extend({initialize:function(t){this._map=t,this.Tools={point:null,polyline:null,path:null,circle:null,rectangle:null,polygon:null,sector:null}},disable:function(){for(var t in this.Tools)null!==this.Tools[t]&&this.Tools[t].disable()},clear:function(){},point:function(i,e){this.disable(),null===this.Tools.point&&(this.Tools.point=new t.ICT.DrawPoint(this._map)),this.Tools.point.enable(i,e)},polyline:function(i,e){this.disable(),null===this.Tools.polyline&&(this.Tools.polyline=new t.ICT.DrawPolyline(this._map)),this.Tools.polyline.enable(i,e)},path:function(i,e){this.disable(),null===this.Tools.path&&(this.Tools.path=new t.ICT.DrawPath(this._map)),this.Tools.path.enable(i,e)},circle:function(i,e){this.disable(),null===this.Tools.circle&&(this.Tools.circle=new t.ICT.DrawCircle(this._map)),this.Tools.circle.enable(i,e)},rectangle:function(i,e){this.disable(),null===this.Tools.rectangle&&(this.Tools.rectangle=new t.ICT.DrawRectangle(this._map)),this.Tools.rectangle.enable(i,e)},polygon:function(i,e){this.disable(),null===this.Tools.polygon&&(this.Tools.polygon=new t.ICT.DrawPolygon(this._map)),this.Tools.polygon.enable(i,e)},sector:function(){}}),t.ICT.DrawPoint=t.Draw.Marker.extend({options:{clickable:!1,repeatMode:!1,declaredClass:"DrawPoint"},initialize:function(){t.Draw.Marker.prototype.initialize.apply(this,arguments)},enable:function(i,e){t.Draw.Marker.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.Marker.prototype.addHooks.call(this)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.Marker.prototype.removeHooks.call(this)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return t.marker(this.getLatLng(),this.options)},clear:function(){},_fireCreatedEvent:function(){var i=t.marker(this._marker.getLatLng(),this.options);t.Draw.Marker.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}}),t.ICT.DrawPolyline=t.Draw.Polyline.extend({options:{repeatMode:!1,showLength:!1,clickable:!1},initialize:function(){t.Draw.Polyline.prototype.initialize.apply(this,arguments)},enable:function(i,e){t.Draw.Polyline.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.Polyline.prototype.addHooks.call(this)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.Polyline.prototype.removeHooks.call(this)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return t.polyline(this.getLatLngs(),this.options)},clear:function(){},_fireCreatedEvent:function(){var i=t.polyline(this._poly.getLatLngs(),this.options.shapeOptions);t.Draw.Polyline.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}}),t.ICT.DrawPath=t.Draw.SimpleShape.extend({statics:{TYPE:"path",tooltip_start_txt:"点击拖动绘制直线",tooltip_end_txt:"释放鼠标完成绘制"},options:{repeatMode:!1,clickable:!1},initialize:function(i,e){t.Draw.SimpleShape.prototype.initialize.call(this,i,e),this.type=t.ICT.DrawPath.TYPE,this._initialLabelText=t.ICT.DrawPath.tooltip_start_txt,this._endLabelText=t.ICT.DrawPath.tooltip_end_txt},enable:function(i,e){t.Draw.SimpleShape.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.SimpleShape.prototype.addHooks.call(this)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.SimpleShape.prototype.removeHooks.call(this)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return t.polyline(this.getLatLngs(),this.options)},clear:function(){},_drawShape:function(i){this._shape?this._shape.setLatLngs([this._startLatLng,i]):(this._shape=new t.Polyline([this._startLatLng,i],this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new t.Polyline(this._shape.getLatLngs(),this.options.shapeOptions);t.Draw.SimpleShape.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}}),t.ICT.DrawPolygon=t.Draw.Polygon.extend({options:{repeatMode:!1,showArea:!1,clickable:!1},initialize:function(){t.Draw.Polygon.prototype.initialize.apply(this,arguments)},enable:function(i,e){t.Draw.Polygon.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.Polygon.prototype.addHooks.call(this)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.Polygon.prototype.removeHooks.call(this)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return t.polygon(this.getLatLngs(),this.options)},clear:function(){},_fireCreatedEvent:function(){var i=t.polygon(this._poly.getLatLngs(),this.options.shapeOptions);t.Draw.Polygon.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}}),t.ICT.DrawCircle=t.Draw.Circle.extend({options:{repeatMode:!1,showRadius:!0,clickable:!1},initialize:function(){t.Draw.Circle.prototype.initialize.apply(this,arguments)},enable:function(i,e){t.Draw.Circle.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.Circle.prototype.addHooks.apply(this,arguments)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.Circle.prototype.removeHooks.apply(this,arguments)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return new t.Circle(this.getLatLng(),this.getRadius(),this.options)},clear:function(){},_fireCreatedEvent:function(){var i=new t.Circle(this._startLatLng,this._shape.getRadius(),this.options);t.Draw.Circle.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}}),t.ICT.DrawRectangle=t.Draw.Rectangle.extend({options:{repeatMode:!1,clickable:!1},initialize:function(){t.Draw.Rectangle.prototype.initialize.apply(this,arguments)},enable:function(i,e){t.Draw.Rectangle.prototype.enable.call(this),this.ictcallback=i,this.ictcontext=e},addHooks:function(){this._map.on("mouseup",this.exist,this),t.Draw.Rectangle.prototype.addHooks.apply(this,arguments)},removeHooks:function(){this._map.off("mouseup",this.exist,this),t.Draw.Rectangle.prototype.removeHooks.apply(this,arguments)},exist:function(t){2==t.originalEvent.button&&this.disable()},clone:function(){return new t.Rectangle(this.getBounds(),this.options)},clear:function(){},_fireCreatedEvent:function(){var i=new t.Rectangle(this._shape.getBounds(),this.options.shapeOptions);t.Draw.Rectangle.prototype._fireCreatedEvent.call(this),"function"==typeof this.ictcallback?this.ictcallback.apply(this.ictcontext||this,[{layer:i,layerType:this.type}]):null}})});