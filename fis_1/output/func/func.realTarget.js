define("func/realTarget",["leaflet","func/base","core/namespace","leaflet/shipDistLayer","leaflet/rotateMarker","plugins/contextmenu","data/ajax","data/webSocket","func/tshf","func/hjcx","control/panel"],function(t){t.ICT.RealTarget=t.Class.extend({initialize:function(e){this.ajax=new t.ICT.Ajax,this.ajaxShipInfo=new t.ICT.Ajax,this.ajaxLocateShip=new t.ICT.Ajax,this.config=Project_ParamConfig.RealTargetConfig,this.ictmap=e,this.realtargetFeatureGroup=t.featureGroup([]),this.currentTarget=null,this._shipdistLayer=null,this._shipSelectMarker=null,this.ictmap.map.addLayer(this.realtargetFeatureGroup),this.shipTypeList=Project_ParamConfig.FilterDisplayConfig.shipTypeList,this.shipFlagList=Project_ParamConfig.FilterDisplayConfig.shipFlagList,this.shipSourceList=Project_ParamConfig.FilterDisplayConfig.shipSourceList,this.config.isZoomEndRequest||this.getRealTarget()},_initWebSocket:function(){this._websocket=new t.ICT.WebSocket(this.config.shipRealSocketUrl),this._websocket.onMessage(function(e){var i=JSON.parse(e.data);t.ICT.Func.HJCX_HJXS.getInstance().updateHJ(i),t.ICT.Func.HJCX_HJKZ.getInstance().hjkzUpdateTarget(i),this.socketMsgHandler(i)},this)},sendMsg:function(){var t=this.getCurRect(),e=Project_ParamConfig.CurrentMode,i=[];i.push(parseFloat(t.ldlon),parseFloat(t.ldlat),parseFloat(t.rulon),parseFloat(t.rulat),e),i=i.join("~"),this._websocket&&1===this._websocket.getState()&&this._websocket.send(i)},socketMsgHandler:function(t){if(1===t.state&&!(t.msg.shipList.length<=0||this.ictmap.OperateState.tshf||this.ictmap.OperateState.wjfx||this.ictmap.OperateState.wjfx_hdyc)){var e=t.msg.shipList;console.log("接收到实时数据，条数："+e.length);for(var i=0,a=e.length;a>i;i++){var r=this.convertTargetObj(e[i]);this.isInCurBound(r)&&this.updateOneTarget(r)}}},isInCurBound:function(e){var i=!1,a=t.latLng(e.lat,e.lon),r=this.ictmap.getBounds();return r.contains(a)&&(i=!0),i},updateFilterLayer:function(){this.realtargetFeatureGroup.eachLayer(function(t){var e=!0,i=t.options.data;this.checkFilter(i)&&(e=!1),e?(t.setOpacity(0),t.options.hasSelectState&&this.hideShipInfoPopPanel()):(t.setOpacity(1),t.options.hasSelectState&&this.showShipInfoPopPanel())},this)},getTargetIcon:function(e){var e=e.toString(),i=null;switch(e){case"货船":i=t.ICT.ShipIcon.ship1;break;case"搜救船":i=t.ICT.ShipIcon.ship8;break;case"油轮":i=t.ICT.ShipIcon.ship2;break;case"拖船":i=t.ICT.ShipIcon.ship3;break;case"渔船":i=t.ICT.ShipIcon.ship4;break;case"客船":i=t.ICT.ShipIcon.ship5;break;case"军事船":i=t.ICT.ShipIcon.ship6;break;case"其他":i=t.ICT.ShipIcon.ship7;break;default:i=t.ICT.ShipIcon.ship7}return i},locateShip:function(e){this.clearLocatLyr();var i=this.getShipById(e.shipid);if(i)this.locateLayer(i);else{var a=this.config.shipInfoUrl;this.ajaxLocateShip.abort(),this.ajaxLocateShip.post(a,e,!0,this,function(e){if(1!==e.state)t.ict.app.util.dialog.error("提示","获取指定船舶信息失败！");else{var i=(this.convertshipInfoObj(e.msg),this.convertTargetObj2(e.msg));this._locateShiplyr=this.createMarker(i,!0),this.ictmap.map.addLayer(this._locateShiplyr),this.locateLayer(this._locateShiplyr)}},function(){})}},locateLayer:function(t){this.isRealTargetShow()?(this.ictmap.map.panTo(t.getLatLng()),t.fire("click")):(this.ictmap.map.setView(t.getLatLng(),this.config.showLevel),t.setOpacity(1),t.fire("click"))},clearLocatLyr:function(){this._locateShiplyr&&(this.ictmap.map.removeLayer(this._locateShiplyr),this._locateShiplyr=null,this._locateShiplyr.options.hasSelectState&&this.removeShipInfoPopPanel())},showLocateLayer:function(){this._locateShiplyr&&this._locateShiplyr.setOpacity(1)},hideLocateLayer:function(){this._locateShiplyr&&this._locateShiplyr.setOpacity(0)},getShipById:function(t){for(var e=null,i=this.realtargetFeatureGroup.getLayers(),a=0,r=i.length;r>a;a++){var s=i[a],n=s.options.data;if(t===n.id){e=s;break}}return e},getTargetsInExtend:function(t){for(var e=[],i=this.realtargetFeatureGroup.getLayers(),a=0,r=i.length;r>a;a++){var s=i[a],n=s.getLatLng();0!==s.options.opacity&&this.isInExtend(n,t)&&e.push(s.options.data)}return e},isInExtend:function(e,i){if(i instanceof t.Rectangle){var a=i.getBounds();return a.contains(e)}if(i instanceof t.Circle){var r=i.getLatLng(),s=i.getRadius(),n=e.distanceTo(r);return s>=n}return!1},isRealTargetShow:function(){var t=!1;return this.realtargetFeatureGroup&&this.ictmap.map.hasLayer(this.realtargetFeatureGroup)&&this.ictmap.map.getZoom()>=this.config.showLevel&&(t=!0),t},showShipDistLayer:function(){this._shipdistLayer?this._shipdistLayer.setOpacity(1):(this._shipdistLayer=new t.TileLayer.ShipDistLayer(this.config.shipDistLayerUrl),this.ictmap.map.addLayer(this._shipdistLayer))},hideShipDistLayer:function(){this._shipdistLayer&&this._shipdistLayer.setOpacity(0)},addShipDistLayer:function(){this.removeShipDistLayer(),this._shipdistLayer=new t.TileLayer.ShipDistLayer(this.config.shipDistLayerUrl),this.ictmap.map.addLayer(this._shipdistLayer)},removeShipDistLayer:function(){this._shipdistLayer&&this.ictmap.map.hasLayer(this._shipdistLayer)&&(this.ictmap.map.removeLayer(this._shipdistLayer),this._shipdistLayer=null)},showRealTargetLayer:function(){this.realtargetFeatureGroup.eachLayer(function(t){this.checkFilter(t.options.data)&&t.setOpacity(1)},this),this.showLocateLayer(),this.showShipInfoPopPanel()},hideRealTargetLayer:function(){this.realtargetFeatureGroup.eachLayer(function(t){t.setOpacity(0)},this),this.hideLocateLayer(),this.hideShipInfoPopPanel()},removeRealTargetLayer:function(){this.realtargetFeatureGroup&&this.realtargetFeatureGroup.clearLayers(),this.removeShipInfoPopPanel()},addRealTargetLayer:function(){this.ictmap.getCurZoom()<this.config.showLevel?(this.showShipDistLayer(),this.hideRealTargetLayer()):(this.hideShipDistLayer(),this.showRealTargetLayer())},labelAllShip:function(t){this.realtargetFeatureGroup&&this.realtargetFeatureGroup.eachLayer(function(e){var i,a=e.options.data;i="shipname"===t?a.shipname:a.id.toString(),e.unbindTooltip(),e.bindTooltip(i,this.getTootipOptions()),e.openTooltip()},this)},hideAlllabel:function(){this.realtargetFeatureGroup&&this.realtargetFeatureGroup.eachLayer(function(t){t.unbindTooltip()},this)},getRealTarget:function(){var e=this.config.shipRealUrl,i={};i.limit=this.config.limit,i.timeout=this.config.timeout,i.mode=Project_ParamConfig.CurrentMode,i=t.extend(i,this.getCurRectExtend()),this._beforeMode=i.mode,this.ajax.post(e,i,!0,this,this._getRectTargetSuccessCallback,this._getRectTargetFailCallback),this.stopInterval(),this._interval=window.setInterval(function(){this.ajax.post(e,i,!0,this,this._getRectTargetSuccessCallback,this._getRectTargetFailCallback)}.bind(this),1e3*this.config.updatetime)},_getRectTargetSuccessCallback:function(t){return 1===t.state&&t.msg.shipList&&t.msg.shipList.length?void this.updateLayer(t):void console.error("未获取指定区域目标！")},_getRectTargetFailCallback:function(){},stopInterval:function(){this._interval&&(window.clearInterval(this._interval),this._interval=null)},updateLayer:function(t){var e=this.convertShipList(t);this.removeInvalidTarget(e),this.updateAllTarget(e)},convertShipList:function(t){for(var e=t.msg.shipList,i=[],a=0,r=e.length;r>a;a++){var s=this.convertTargetObj(e[a]);i.push(s)}return i},convertTargetObj:function(t){var e={};return e.country=this.getDetialConvertName(t.co,"country"),e.infotype=t.mt,e.infosrc=t.ms,e.num=t.nu,e.lon=parseFloat(t.lo/6e5),e.lat=parseFloat(t.la/6e5),e.dir=parseFloat((t.di/10).toFixed(1)),e.heading=t.he,e.shipname=t.sn.replace(/@/g,"")||"未知",e.shiptype=this.getDetialConvertName(t.st,"ship_type"),e.time=t.ti,e.speed=t.sp/10||"未知",e.id=this.getShipIdMode(t).id,e.mode=this.getShipIdMode(t).mode,e},convertTargetObj2:function(t){var e={};return e.country=t.country_name.replace(/@/g,"")||"其他",e.infotype=t.orig_info_type,e.infosrc=t.orig_info_source,e.num=t.target_id,e.lon=parseFloat(t.longitude/6e5),e.lat=parseFloat(t.latitude/6e5),e.dir=parseFloat((t.direction/10).toFixed(1)),e.heading=t.heading,e.shipname=t.ship_name.replace(/@/g,"")||"未知",e.shiptype=this.getDetialConvertName(t.ship_type,"ship_type"),e.time=t.record_utc_time,e.speed=t.speed/10||"未知",e.id=this.getShipIdMode2(t).id,e.mode=this.getShipIdMode2(t).mode,e},getShipIdMode:function(t){var e={id:null,mode:null};return 0===Project_ParamConfig.CurrentMode?(e.id=t.nu,e.mode=0):(e.id=t.nu,e.mode=t.mt),e},getShipIdMode2:function(t){var e={id:null,mode:null};return 0===Project_ParamConfig.CurrentMode?(e.id=t.target_id,e.mode=0):(e.id=t.target_id_orig,e.mode=t.targetIDOrig_Type),e},updateAllTarget:function(t){for(var e=0,i=t.length;i>e;e++){var a=t[e];this.updateOneTarget(a)}},updateOneTarget:function(e){for(var i=!1,a=this.realtargetFeatureGroup.getLayers(),r=0,s=a.length;s>r;r++){var n=a[r],o=n.options.data;if(o.id===e.id){if(i=!0,this.isChange(o,e)){var h=t.latLng(e.lat,e.lon);n.setLatLng(h),n.setRotationAngle(e.dir),n.options.data=e}break}}if(!i&&a.length<this.config.limit&&this._beforeMode===Project_ParamConfig.CurrentMode){var c=this.createMarker(e,!0);this.isShowNewTarget(e)||c.setOpacity(0),this.realtargetFeatureGroup.addLayer(c)}},isShowNewTarget:function(t){return!this.ictmap.OperateState.tshf&&!this.ictmap.OperateState.wjfx&&!this.ictmap.OperateState.wjfx_hdyc&&this.checkFilter(t)&&this.isRealTargetShow()},isChange:function(t,e){var i=!1;return(e.lat!==t.lat||e.lon!==t.lon)&&(i=!0),i},createMarker:function(e,i){var i=i?i:!1,a=t.latLng(e.lat,e.lon),r=e.shipname,s=this.getTargetIcon(e.shiptype),n={icon:s,opacity:1,rotationAngle:e.dir,rotationOrigin:"center center",title:r,data:e};n.icon.options.className="leaflet-marker-rightclick-icon";var o=t.marker(a,n);if(this.ictmap.labelType){var h=null;"shipname"===this.ictmap.labelType?h=e.shipname.toString():"id"===this.ictmap.labelType&&(h=e.id.toString()),o.bindTooltip(h,this.getTootipOptions()),o.openTooltip()}return i&&this.addTargetEvt(o),o},getTootipOptions:function(){return{offset:[0,0],direction:"top",permanent:!0,opacity:.8}},checkFilter:function(t){var e=!1,i=!1,a=!1,r=t.infosrc.toString();-1!==this.shipSourceList.indexOf(r)&&(a=!0);var r=t.shiptype.toString();-1!==this.shipTypeList.indexOf(r)&&(e=!0);var r=t.country.toString();return-1!==this.shipFlagList.indexOf(r)&&(i=!0),e&&i&&a},removeInvalidTarget:function(t){for(var e=this.realtargetFeatureGroup.getLayers(),i=0,a=e.length;a>i;i++){var r=e[i],s=r.options.data;this.isContain(s,t)||this.realtargetFeatureGroup.removeLayer(r)}},isContain:function(t,e){for(var i=!1,a=0,r=e.length;r>a;a++)if(e[a].id===t.id){i=!0;break}return i},addTargetEvt:function(t){t.on("contextmenu",this._markerRightClickEvt,this),t.on("click",this._markerClickEvt,this)},removeTargetEvt:function(t){t.off("contextmenu",this._markerRightClickEvt,this),t.off("click",this._markerClickEvt,this)},_markerRightClickEvt:function(e){t.DomEvent.stopPropagation(e);var i=this.ictmap.map.getContainer(),a=e.containerPoint.x+i.offsetLeft,r=e.containerPoint.y+i.offsetTop;this.currentTarget=e.target,$("#mappanel").contextMenu(!1),$(".leaflet-marker-rightclick-icon").contextMenu(!0),$(".leaflet-marker-rightclick-icon").contextMenu({x:a,y:r})},initContextMenu:function(){var t=this;$.contextMenu({selector:".leaflet-marker-rightclick-icon",trigger:"none",callback:function(e,i){t._rightClickCallback(e,i)},items:{bpxs:{name:"标牌显示",items:{"bpxs-shipname":{name:"船名"},"bpxs-ph":{name:"批号"},"bpxs-all":{name:"目标信息"},"bpxs-close":{name:"关闭显示"}}},hjxs:{name:"航迹显示"},xskz:{name:"显示控制",items:{"xskz-key1":{name:"全航迹"},"xskz-key2":{name:"10点"},"xskz-key3":{name:"100点"},"xskz-key4":{name:"1000点"}}},tshf:{name:"态势回放"},addhf:{name:"加入回放列表"}}})},_rightClickCallback:function(e){var i=this.currentTarget,a=i.options.data;if("bpxs-shipname"===e){var r=a.shipname;i.unbindTooltip(),i.bindTooltip(r,this.getTootipOptions()),i.openTooltip()}else if("bpxs-ph"===e){var s=a.id.toString();i.unbindTooltip(),i.bindTooltip(s,this.getTootipOptions()),i.openTooltip()}else if("bpxs-all"===e){var n=t.ict.app.util.tool.latlngTodfmStr(a.lat,"lat"),o=t.ict.app.util.tool.latlngTodfmStr(a.lon,"lng"),h=t.ict.app.util.dateTime.getTimeStrFromUnix(a.time),c="船舶编号："+a.num+"<br>船名："+a.shipname+"<br>船舶类型："+a.shiptype+"<br>经度："+n+"<br>纬度："+o+"<br>航向："+a.dir+"<br>船首向："+a.heading+"<br>时间："+h+"<br>船速："+a.speed+"节<br>国家："+a.country+"<br>信息类型："+this.getDetialConvertName(a.infotype,"orig_info_type")+"<br>信息来源："+this.getDetialConvertName(a.infosrc,"orig_info_source")+"<br>id："+a.id;i.unbindTooltip(),i.bindTooltip(c,this.getTootipOptions()),i.openTooltip()}else if("bpxs-close"===e)i.unbindTooltip();else if("hjxs"===e){var l=t.ICT.Func.HJCX_HJXS.getInstance();l.start()}else if("xskz-key1"===e){var p=t.ICT.Func.HJCX_HJKZ.getInstance();p.start(0)}else if("xskz-key2"===e){var p=t.ICT.Func.HJCX_HJKZ.getInstance();p.start(10)}else if("xskz-key3"===e){var p=t.ICT.Func.HJCX_HJKZ.getInstance();p.start(100)}else if("xskz-key4"===e){var p=t.ICT.Func.HJCX_HJKZ.getInstance();p.start(1e3)}else if("tshf"===e)t.ICT.Func.TSHFOneShip.run();else if("addhf"===e){var d=t.ICT.Func.TSHFMoreShip.getInstance();d.addTarget(a),d._targetPanel?d.updateList():t.ict.app.util.dialog.success("提示","成功加入回放列表！")}},_markerClickEvt:function(e){var i=(e.target,this.config.shipInfoUrl),a={};a.shipid=e.target.options.data.id,a.mode=e.target.options.data.mode,this.currentTarget=e.target,this.removeSelectMarker(),this.createSelectMarker(e),this.ajaxShipInfo.abort(),this.ajaxShipInfo.post(i,a,!0,this,function(e){if(1!==e.state)t.ict.app.util.dialog.error("提示","获取指定船舶信息失败！"),this.removeShipInfoPopPanel();else{var i=this.convertshipInfoObj(e.msg);this.createShipInfoPopPanel(i),this._initPopEvt()}},function(){})},createSelectMarker:function(e){var i=e.target.getLatLng(),a=t.divIcon({iconSize:[26,26],iconAnchor:[13,13],className:"ict_markerselect_divicon"});this._shipSelectMarker=t.marker(i,{icon:a}),this._shipSelectMarker.on("contextmenu",function(t){var i={};i.containerPoint=t.containerPoint,i.layerPoint=t.layerPoint,i.latlng=e.target.getLatLng(),e.target.fire("contextmenu",i)},this),this._shipSelectMarker.on("click",function(t){var i={};i.containerPoint=t.containerPoint,i.layerPoint=t.layerPoint,i.latlng=e.target.getLatLng(),e.target.fire("click",i)},this),this._shipSelectMarker.addTo(this.ictmap.map),$(".ict_markerselect_divicon").css("border","dotted 3px #f00"),e.target.options.hasSelectState=!0,e.target.on("move",function(t){this._shipSelectMarker&&e.target.options.hasSelectState&&this._shipSelectMarker.setLatLng(t.target.getLatLng())},this)},removeSelectMarker:function(){this._shipSelectMarker&&(this._shipSelectMarker.remove(),this._shipSelectMarker=null,this.clearSelectState())},showSelectMarker:function(){this._shipSelectMarker&&this._shipSelectMarker.setOpacity(1)},hideSelectMarker:function(){this._shipSelectMarker&&this._shipSelectMarker.setOpacity(0)},clearSelectState:function(){for(var t=this.realtargetFeatureGroup.getLayers(),e=0,i=t.length;i>e;e++){var a=t[e];a.options.hasSelectState&&(a.options.hasSelectState=!1)}},createShipInfoPopPanel:function(e){if(this._shipinfoPopPanel)return void this._shipinfoPopPanel.setContent(this.getPopupContent(e));var i={title:"船舶信息",width:460,height:330,right:40,top:80,disableSelect:!1,className:"ict_realTarget_popupContainer",contentHTML:this.getPopupContent(e)};this._shipinfoPopPanel=new t.ICT.PopPanel(i),this._shipinfoPopPanel.on("popPanelRemove",function(){this._shipinfoPopPanel=null,this.removeSelectMarker()},this),this._shipinfoPopPanel.show()},removeShipInfoPopPanel:function(){this._shipinfoPopPanel&&(this._shipinfoPopPanel.remove(),this._shipinfoPopPanel=null)},showShipInfoPopPanel:function(){this._shipinfoPopPanel&&(this._shipinfoPopPanel.show(),this.showSelectMarker())},hideShipInfoPopPanel:function(){this._shipinfoPopPanel&&(this._shipinfoPopPanel.close(),this.hideSelectMarker())},convertshipInfoObj:function(t){var e={};return e.id=-1===t.target_id?t.target_id_orig:t.target_id,e.record_utc_time=t.record_utc_time,e.lon=parseFloat(t.longitude/6e5),e.lat=parseFloat(t.latitude/6e5),e.di=parseFloat(t.direction/10).toFixed(1),e.he=t.heading,e.sp=t.speed/10,e.st=this.getDetialConvertName(t.status,"status"),e.rot=t.rot_sensor,e.type=this.getDetialConvertName(t.orig_info_type,"orig_info_type"),e.src=this.getDetialConvertName(t.orig_info_source,"orig_info_source"),e.target_id_orig=t.target_id_orig,e.mmsi=t.mmsi,e.sn=t.ship_name.replace(/@/g,"")||"未知",e.call_sign=t.call_sign.replace(/@/g,"")||"未知",e.imo=t.imo_number,e.des=t.destination,e.eta=t.eta,e.draft=t.draft,e.cn=t.country_name.replace(/@/g,"")||"其他",e.ship_type=this.getDetialConvertName(t.ship_type,"ship_type"),e.cargo_type=t.cargo_type,e.ship_length=t.ship_length,e.ship_breadth=t.ship_breadth,e.fixing_device=this.getDetialConvertName(t.fixing_device,"fixing_device"),e.pos_accuracy=this.getDetialConvertName(t.pos_accuracy,"pos_accuracy"),e.commun_state=this.getDetialConvertName(t.commun_state,"commun_state"),e},getPopupContent:function(e){var i=t.ict.app.util.tool.latlngTodfmStr(e.lat,"lat"),a=t.ict.app.util.tool.latlngTodfmStr(e.lon,"lng"),r=t.ict.app.util.dateTime.getTimeStrFromUnix(e.record_utc_time),s=[];return s.push('<div class="shipInfo_Div">'),s.push('<div class="shipInfo_table_div">'),s.push('<table data-id="'+e.id+'">'),s.push('<tr><td width="18%">批号:</td><td>'+e.id+'</td><td width="18%">信息源:</td><td>'+e.src+"</td></tr>"),s.push("<tr><td>船名:</td><td>"+e.sn+"</td><td>MMSI:</td><td>"+e.mmsi+"</td></tr>"),s.push("<tr><td>IMO:</td><td>"+e.imo+"</td><td>呼号:</td><td>"+e.call_sign+"</td></tr>"),s.push("<tr><td>时间:</td><td>"+r+"</td><td>地区:</td><td>"+e.cn+"</td></tr>"),s.push("<tr><td>航行状态:</td><td>"+e.st+"</td><td>航向:</td><td>"+e.di+"°</td></tr>"),s.push("<tr><td>经度:</td><td>"+a+"</td><td>纬度:</td><td>"+i+"</td></tr>"),s.push("<tr><td>航艏向:</td><td>"+e.he+"°</td><td>转向率:</td><td>"+e.rot+"</td></tr>"),s.push("<tr><td>航速:</td><td>"+e.sp+"节</td><td>通信状态:</td><td>"+e.commun_state+"</td></tr>"),s.push("<tr><td>船舶类型:</td><td>"+e.ship_type+"</td><td>信息类型:</td><td>"+e.type+"</td></tr>"),s.push("</table>"),s.push("</div>"),s.push('<div class="btnDiv">'),s.push('<button type="button" data-id="'+e.id+'" class="daxx">档案信息</button>'),s.push("</div>"),s.push("</div>"),s.join("")},_initPopEvt:function(){$(".ict_realTarget_popupContainer .btnDiv>button").on("click",function(){$(this).data("id");window.open("resultpage/shiprecord.html")})},getDetialConvertName:function(t,e){var i="";if(t.toString&&(t=t.toString()),"ship_type"==e)switch(t){case"1":i="货船";break;case"2":i="搜救船";break;case"3":i="油轮";break;case"4":i="拖船";break;case"5":i="渔船";break;case"6":i="客船";break;case"7":i="军事船";break;default:i="其他"}else if("country"==e)switch(t){case"中国":i="中国";break;case"美国":i="美国";break;case"英国":i="英国";break;case"法国":i="法国";break;case"俄罗斯":i="俄罗斯";break;default:i="其他"}else if("hwlx"==e)i=t;else if("status"==e)switch(t){case"0":i="机动船在航";break;case"1":i="锚泊";break;case"2":i="船舶失控";break;case"3":i="船舶操作受限";break;case"4":i="受吃水限制，船舶行动受限";break;case"5":i="系泊";break;case"6":i="搁浅";break;case"7":i="从事捕捞";break;case"8":i="船舶在航";break;default:i="未知"}else if("fixing_device"==e)switch(t){case"-1":res1="非法";break;case"0":i="默认";break;case"1":i="GPS";break;case"2":i="GLONASS";break;case"3":i="GPS/GLONASS组合";break;case"4":i="Loran-C";break;case"5":i="Chayka";break;case"6":i="综合导航系统";break;case"7":i="观测";break;case"8":i="北斗";break;case"9":case"10":case"11":case"12":case"13":case"14":i="未使用";break;case"15":i="内部GNSS";break;default:i=t}else if("commun_state"==e)switch(t){case"0":i="未知";break;case"1":i="SOTDMA";break;case"2":i="ITDMA";break;default:i=t}else if("pos_accuracy"==e)switch(t){case"0":i="未知";break;case"1":i="定位误差大于10米";break;case"2":i="定位误差小于等于10米";break;default:i=t}else if("orig_info_source"==e)switch(t){case"1":i="农业部";break;case"2":i="海事局";break;case"3":i="海监";break;default:i=t}else if("orig_info_type"==e)switch(t){case"1":i="Argos及海事卫星";break;case"2":i="北斗";break;case"3":i="AIS静态";break;case"4":i="AIS动态";break;case"5":i="LRIT";break;case"7":i="海监";break;case"15":i="综合信息";break;default:i=t}return i},getCurRect:function(){var t={},e=this.ictmap.getBounds(),i=e.getSouthWest(),a=e.getNorthEast();return t.ldlon=parseFloat(i.lng.toFixed(6)),t.ldlat=parseFloat(i.lat.toFixed(6)),t.rulon=parseFloat(a.lng.toFixed(6)),t.rulat=parseFloat(a.lat.toFixed(6)),t},getCurRectExtend:function(){var t={},e=this.ictmap.getBounds().pad(this.config.bufferRatio),i=e.getSouthWest(),a=e.getNorthEast();return t.ldlon=parseFloat(i.lng.toFixed(6)),t.ldlat=parseFloat(i.lat.toFixed(6)),t.rulon=parseFloat(a.lng.toFixed(6)),t.rulat=parseFloat(a.lat.toFixed(6)),t}})});