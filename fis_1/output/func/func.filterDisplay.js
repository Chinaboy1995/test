define("func/filterDisplay",["leaflet","func/base"],function(s){s.ICT.Func.add("FilterDisplay",{Class:s.Class.extend({initialize:function(){this.menu=s.ict.app.menu,this.menuid="ict_menu_main_glxs",this.ictmap=s.ict.app.ictmap,this.shipTypeList=Project_ParamConfig.FilterDisplayConfig.shipTypeList,this.shipFlagList=Project_ParamConfig.FilterDisplayConfig.shipFlagList,this.shipSourceList=Project_ParamConfig.FilterDisplayConfig.shipSourceList},start:function(){this.menu.submenu.has(this.menuid)||this.menu.submenu.add(this.menuid,this.getSubMenuHTML()),this.menu.submenu.show(this.menuid),this._initSubMenuEvts()},stop:function(){this.menu.submenu.hide()},getSubMenuHTML:function(){var s=[];s.push('<ul class="submenu_glxs">'),s.push('<li class="submenu_glxs_li">'),s.push('<img src="themes/images/frame/menu_glxs_aly.png">&nbsp&nbsp<label>信息源</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),s.push('<ul class="filter_ul shipSourceList" style="display:none;">');for(var i=0,e=this.shipSourceList.length;e>i;i++)s.push("<li>"),s.push("<label>"+this.getSourceValue(this.shipSourceList[i])+"</label>"),s.push("&nbsp;&nbsp"),s.push('<input type="checkbox" value="'+this.shipSourceList[i]+'" checked>'),s.push("</li>");s.push("</ul>"),s.push("</li>"),s.push('<li class="submenu_glxs_li">'),s.push('<img src="themes/images/frame/menu_glxs_cblx.png">&nbsp&nbsp<label>目标类型</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),s.push('<ul class="filter_ul shipTypeList" style="display:none;">');for(var i=0,e=this.shipTypeList.length;e>i;i++)s.push("<li>"),s.push('<img src="themes/images/shipIcons/shipTypeList_'+this.shipTypeList[i]+'.png">'),s.push("&nbsp;&nbsp"),s.push("<label>"+this.shipTypeList[i]+"</label>"),s.push("&nbsp;&nbsp"),s.push('<input type="checkbox" value="'+this.shipTypeList[i]+'" checked>'),s.push("</li>");s.push("</ul>"),s.push("</li>"),s.push('<li class="submenu_glxs_li">'),s.push('<img src="themes/images/frame/menu_glxs_cq.png">&nbsp&nbsp<label>目标国别</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),s.push('<ul class="filter_ul shipFlagList" style="display:none;">');for(var i=0,e=this.shipFlagList.length;e>i;i++)s.push("<li>"),s.push('<img src="themes/images/country/'+this.shipFlagList[i]+'.png">'),s.push("&nbsp;&nbsp"),s.push("<label>"+this.shipFlagList[i]+"</label>"),s.push("&nbsp;&nbsp"),s.push('<input type="checkbox" value="'+this.shipFlagList[i]+'" checked>'),s.push("</li>");return s.push("</ul>"),s.push("</li>"),s.push("</ul>"),s.join("")},_initSubMenuEvts:function(){var s=this,i=this.menu.getContainer();i.find(".submenu_glxs .submenu_glxs_li").on("click",function(){$(this).hasClass("active")?($(this).find(".filter_ul").css("display","none"),$(this).find(".arrowImg").attr("src","themes/images/frame/arrow_down.png"),$(this).removeClass("active")):($(this).find(".filter_ul").css("display","block"),$(this).find(".arrowImg").attr("src","themes/images/frame/arrow_up.png"),$(this).addClass("active").siblings().removeClass("active"),$(this).siblings().find(".filter_ul").css("display","none"),$(this).siblings().find(".arrowImg").attr("src","themes/images/frame/arrow_down.png"))}),i.find(".submenu_glxs .filter_ul").on("click",function(s){s.stopPropagation()}),i.find(".submenu_glxs .shipTypeList>li>input[type=checkbox]").on("click",function(){var i=$(this).val();if(this.checked)s.shipTypeList.push(i);else{var e=s.shipTypeList.indexOf(i);-1!==e&&s.shipTypeList.splice(e,1)}s.updateShowTarget()}),i.find(".submenu_glxs .shipFlagList>li>input[type=checkbox]").on("click",function(){var i=$(this).val();if(this.checked)s.shipFlagList.push(i);else{var e=s.shipFlagList.indexOf(i);-1!==e&&s.shipFlagList.splice(e,1)}s.updateShowTarget()}),i.find(".submenu_glxs .shipSourceList>li>input[type=checkbox]").on("click",function(){var i=$(this).val();if(this.checked)s.shipSourceList.push(i);else{var e=s.shipSourceList.indexOf(i);-1!==e&&s.shipSourceList.splice(e,1)}s.updateShowTarget()})},getSourceValue:function(s){var i="";return"1"==s?i="渔政局":"2"==s?i="海监":"3"==s?i="北斗信息":"4"==s?i="救捞局":"5"==s?i="星载AIS":"6"==s?i="":"7"==s?i="":"8"==s&&(i=""),i},updateShowTarget:function(){this.ictmap.realtarget.isRealTargetShow()&&this.ictmap.realtarget.updateFilterLayer()}})})});