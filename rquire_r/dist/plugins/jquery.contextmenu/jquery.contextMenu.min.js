/*!
 * jQuery contextMenu v2.4.3-dev - Plugin for simple contextMenu handling
 *
 * Version: v2.4.3-dev
 *
 * Authors: BjÃ¶rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://swisnl.github.io/jQuery-contextMenu/
 *
 * Copyright (c) 2011-2017 SWIS BV and contributors
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 * Date: 2017-01-21T11:53:09.617Z
 */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){for(var t,n=e.split(/\s+/),r=[],i=0;t=n[i];i++)t=t.charAt(0).toUpperCase(),r.push(t);return r}function n(t){return t.id&&e('label[for="'+t.id+'"]').val()||t.name}function r(t,i,s){return s||(s=0),i.each(function(){var i,o,u=e(this),a=this,f=this.nodeName.toLowerCase();switch("label"===f&&u.find("input, textarea, select").length&&(i=u.text(),u=u.children().first(),a=u.get(0),f=a.nodeName.toLowerCase()),f){case"menu":o={name:u.attr("label"),items:{}},s=r(o.items,u.children(),s);break;case"a":case"button":o={name:u.text(),disabled:!!u.attr("disabled"),callback:function(){return function(){u.click()}}()};break;case"menuitem":case"command":switch(u.attr("type")){case void 0:case"command":case"menuitem":o={name:u.attr("label"),disabled:!!u.attr("disabled"),icon:u.attr("icon"),callback:function(){return function(){u.click()}}()};break;case"checkbox":o={type:"checkbox",disabled:!!u.attr("disabled"),name:u.attr("label"),selected:!!u.attr("checked")};break;case"radio":o={type:"radio",disabled:!!u.attr("disabled"),name:u.attr("label"),radio:u.attr("radiogroup"),value:u.attr("id"),selected:!!u.attr("checked")};break;default:o=void 0}break;case"hr":o="-------";break;case"input":switch(u.attr("type")){case"text":o={type:"text",name:i||n(a),disabled:!!u.attr("disabled"),value:u.val()};break;case"checkbox":o={type:"checkbox",name:i||n(a),disabled:!!u.attr("disabled"),selected:!!u.attr("checked")};break;case"radio":o={type:"radio",name:i||n(a),disabled:!!u.attr("disabled"),radio:!!u.attr("name"),value:u.val(),selected:!!u.attr("checked")};break;default:o=void 0}break;case"select":o={type:"select",name:i||n(a),disabled:!!u.attr("disabled"),selected:u.val(),options:{}},u.children().each(function(){o.options[this.value]=e(this).text()});break;case"textarea":o={type:"textarea",name:i||n(a),disabled:!!u.attr("disabled"),value:u.val()};break;case"label":break;default:o={type:"html",html:u.clone(!0)}}o&&(s++,t["key"+s]=o)}),s}e.support.htmlMenuitem="HTMLMenuItemElement"in window,e.support.htmlCommand="HTMLCommandElement"in window,e.support.eventSelectstart="onselectstart"in document.documentElement,e.ui&&e.widget||(e.cleanData=function(e){return function(t){var n,r,i;for(i=0;null!=t[i];i++){r=t[i];try{n=s._data(r,"events"),n&&n.remove&&s(r).triggerHandler("remove")}catch(s){}}e(t)}}(e.cleanData));var i=null,s=!1,o=e(window),u=0,a={},f={},l={},c={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var n=this.offset();n.top+=this.outerHeight(),n.left+=this.outerWidth()/2-t.outerWidth()/2,t.css(n)}},position:function(e,t,n){var r;if(!t&&!n)return void e.determinePosition.call(this,e.$menu);r="maintain"===t&&"maintain"===n?e.$menu.position():{top:n,left:t};var i=o.scrollTop()+o.height(),s=o.scrollLeft()+o.width(),u=e.$menu.outerHeight(),a=e.$menu.outerWidth();r.top+u>i&&(r.top-=u),r.top<0&&(r.top=0),r.left+a>s&&(r.left-=a),r.left<0&&(r.left=0),e.$menu.css(r)},positionSubmenu:function(t){if(void 0!==t)if(e.ui&&e.ui.position)t.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};t.css(n)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},h={timer:null,pageX:null,pageY:null},p=function(e){for(var t=0,n=e;;)if(t=Math.max(t,parseInt(n.css("z-index"),10)||0),n=n.parent(),!n||!n.length||"html body".indexOf(n.prop("nodeName").toLowerCase())>-1)break;return t},d={abortevent:function(e){e.preventDefault(),e.stopImmediatePropagation()},contextmenu:function(t){var n=e(this);if("right"===t.data.trigger&&(t.preventDefault(),t.stopImmediatePropagation()),!("right"!==t.data.trigger&&"demand"!==t.data.trigger&&t.originalEvent||!(void 0===t.mouseButton||!t.data||"left"===t.data.trigger&&0===t.mouseButton||"right"===t.data.trigger&&2===t.mouseButton)||n.hasClass("context-menu-active")||n.hasClass("context-menu-disabled"))){if(i=n,t.data.build){var r=t.data.build(i,t);if(r===!1)return;if(t.data=e.extend(!0,{},c,t.data,r||{}),!t.data.items||e.isEmptyObject(t.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");t.data.$trigger=i,v.create(t.data)}var s=!1;for(var o in t.data.items)if(t.data.items.hasOwnProperty(o)){var u;u=e.isFunction(t.data.items[o].visible)?t.data.items[o].visible.call(e(t.currentTarget),o,t.data):"undefined"==typeof t.data.items[o]||!t.data.items[o].visible||t.data.items[o].visible===!0,u&&(s=!0)}s&&v.show.call(n,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var n=e(this);i&&i.length&&!i.is(n)&&i.data("contextMenu").$menu.trigger("contextmenu:hide"),2===t.button&&(i=n.data("contextMenuActive",!0))},mouseup:function(t){var n=e(this);n.data("contextMenuActive")&&i&&i.length&&i.is(n)&&!n.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),i=n,n.trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))),n.removeData("contextMenuActive")},mouseenter:function(t){var n=e(this),r=e(t.relatedTarget),s=e(document);r.is(".context-menu-list")||r.closest(".context-menu-list").length||i&&i.length||(h.pageX=t.pageX,h.pageY=t.pageY,h.data=t.data,s.on("mousemove.contextMenuShow",d.mousemove),h.timer=setTimeout(function(){h.timer=null,s.off("mousemove.contextMenuShow"),i=n,n.trigger(e.Event("contextmenu",{data:h.data,pageX:h.pageX,pageY:h.pageY}))},t.data.delay))},mousemove:function(e){h.pageX=e.pageX,h.pageY=e.pageY},mouseleave:function(e){var t=n(e.relatedTarget);if(!t.is(".context-menu-list")&&!t.closest(".context-menu-list").length){try{clearTimeout(h.timer)}catch(n){}h.timer=null}},layerClick:function(t){var n,r,i=e(this),s=i.data("contextMenuRoot"),u=t.button,a=t.pageX,f=t.pageY;t.preventDefault(),t.stopImmediatePropagation(),setTimeout(function(){var i,l="left"===s.trigger&&0===u||"right"===s.trigger&&2===u;if(document.elementFromPoint&&s.$layer){if(s.$layer.hide(),n=document.elementFromPoint(a-o.scrollLeft(),f-o.scrollTop()),n.isContentEditable){var c=document.createRange(),h=window.getSelection();c.selectNode(n),c.collapse(!0),h.removeAllRanges(),h.addRange(c)}s.$layer.show()}if(s.reposition&&l)if(document.elementFromPoint){if(s.$trigger.is(n)||s.$trigger.has(n).length)return void s.position.call(s.$trigger,s,a,f)}else if(r=s.$trigger.offset(),i=e(window),r.top+=i.scrollTop(),r.top<=t.pageY&&(r.left+=i.scrollLeft(),r.left<=t.pageX&&(r.bottom=r.top+s.$trigger.outerHeight(),r.bottom>=t.pageY&&(r.right=r.left+s.$trigger.outerWidth(),r.right>=t.pageX))))return void s.position.call(s.$trigger,s,a,f);n&&l&&s.$trigger.one("contextmenu:hidden",function(){e(n).contextMenu({x:a,y:f,button:u})}),null!=s&&null!=s.$menu&&s.$menu.trigger("contextmenu:hide")},50)},keyStop:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()},key:function(e){var t={};i&&(t=i.data("contextMenu")||{}),void 0===t.zIndex&&(t.zIndex=0);var n=0,r=function(e){""!==e.style.zIndex?n=e.style.zIndex:null!==e.offsetParent&&void 0!==e.offsetParent?r(e.offsetParent):null!==e.parentElement&&void 0!==e.parentElement&&r(e.parentElement)};if(r(e.target),!(n>t.zIndex)){switch(e.keyCode){case 9:case 38:if(d.keyStop(e,t),t.isInput){if(9===e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void (null!=t.$menu&&t.$menu.trigger("prevcommand"));if(38===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!==e.keyCode||e.shiftKey)return void (null!=t.$menu&&t.$menu.trigger("prevcommand"));break;case 40:if(d.keyStop(e,t),!t.isInput)return void (null!=t.$menu&&t.$menu.trigger("nextcommand"));if(9===e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void (null!=t.$menu&&t.$menu.trigger("nextcommand"));if(40===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(d.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var s=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur"),void (t.$selected=s)}break;case 39:if(d.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var o=t.$selected.data("contextMenu")||{};if(o.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,o.$selected=null,void o.$menu.trigger("nextcommand");break;case 35:case 36:return t.$selected&&t.$selected.find("input, textarea, select").length?void 0:((t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[36===e.keyCode?"first":"last"]().trigger("contextmenu:focus"),void e.preventDefault());case 13:if(d.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void ("undefined"!=typeof t.$selected&&null!==t.$selected&&t.$selected.trigger("mouseup"));case 32:case 33:case 34:return void d.keyStop(e,t);case 27:return d.keyStop(e,t),void (null!=t.$menu&&t.$menu.trigger("contextmenu:hide"));default:var u=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[u])return void t.accesskeys[u].$node.trigger(t.accesskeys[u].$menu?"contextmenu:focus":"mouseup")}e.stopPropagation(),"undefined"!=typeof t.$selected&&null!==t.$selected&&t.$selected.trigger(e)}},prevItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},r=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var s=n.$menu.children(),o=n.$selected&&n.$selected.prev().length?n.$selected.prev():s.last(),u=o;o.hasClass(r.classNames.disabled)||o.hasClass(r.classNames.notSelectable)||o.is(":hidden");)if(o=o.prev().length?o.prev():s.last(),o.is(u))return;n.$selected&&d.itemMouseleave.call(n.$selected.get(0),t),d.itemMouseenter.call(o.get(0),t);var a=o.find("input, textarea, select");a.length&&a.focus()},nextItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},r=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}for(var s=n.$menu.children(),o=n.$selected&&n.$selected.next().length?n.$selected.next():s.first(),u=o;o.hasClass(r.classNames.disabled)||o.hasClass(r.classNames.notSelectable)||o.is(":hidden");)if(o=o.next().length?o.next():s.first(),o.is(u))return;n.$selected&&d.itemMouseleave.call(n.$selected.get(0),t),d.itemMouseenter.call(o.get(0),t);var a=o.find("input, textarea, select");a.length&&a.focus()},focusInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),r=n.contextMenu,i=n.contextMenuRoot;i.$selected=r.$selected=t,i.isInput=r.isInput=!0},blurInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),r=n.contextMenu,i=n.contextMenuRoot;i.isInput=r.isInput=!1},menuMouseenter:function(){var t=e(this).data().contextMenuRoot;t.hovering=!0},menuMouseleave:function(t){var n=e(this).data().contextMenuRoot;n.$layer&&n.$layer.is(t.relatedTarget)&&(n.hovering=!1)},itemMouseenter:function(t){var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;return s.hovering=!0,t&&s.$layer&&s.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(i.$menu?i:s).$menu.children("."+s.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable)?void (i.$selected=null):void n.trigger("contextmenu:focus")},itemMouseleave:function(t){var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;return s!==i&&s.$layer&&s.$layer.is(t.relatedTarget)?("undefined"!=typeof s.$selected&&null!==s.$selected&&s.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),void (s.$selected=i.$selected=i.$node)):void n.trigger("contextmenu:blur")},itemClick:function(t){var n,r=e(this),i=r.data(),s=i.contextMenu,o=i.contextMenuRoot,u=i.contextMenuKey;if(!(!s.items[u]||r.is("."+o.classNames.disabled+", .context-menu-separator, ."+o.classNames.notSelectable)||r.is(".context-menu-submenu")&&o.selectableSubMenu===!1)){if(t.preventDefault(),t.stopImmediatePropagation(),e.isFunction(s.callbacks[u])&&Object.prototype.hasOwnProperty.call(s.callbacks,u))n=s.callbacks[u];else{if(!e.isFunction(o.callback))return;n=o.callback}n.call(o.$trigger,u,o)!==!1?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&v.update.call(o.$trigger,o)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(t,n){var r=e(this).data("contextMenuRoot");v.hide.call(r.$trigger,r,n&&n.force)},focusItem:function(t){t.stopPropagation();var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable)||(n.addClass([s.classNames.hover,s.classNames.visible].join(" ")).parent().find(".context-menu-item").not(n).removeClass(s.classNames.visible).filter("."+s.classNames.hover).trigger("contextmenu:blur"),i.$selected=s.$selected=n,i.$node&&s.positionSubmenu.call(i.$node,i.$menu))},blurItem:function(t){t.stopPropagation();var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;i.autoHide&&n.removeClass(s.classNames.visible),n.removeClass(s.classNames.hover),i.$selected=null}},v={show:function(t,n,r){var s=e(this),o={};if(e("#context-menu-layer").trigger("mousedown"),t.$trigger=s,t.events.show.call(s,t)===!1)return void (i=null);if(v.update.call(s,t),t.position.call(s,t,n,r),t.zIndex){var u=t.zIndex;"function"==typeof t.zIndex&&(u=t.zIndex.call(s,t)),o.zIndex=p(s)+u}v.layer.call(t.$menu,t,o.zIndex),t.$menu.find("ul").css("zIndex",o.zIndex+1),t.$menu.css(o)[t.animation.show](t.animation.duration,function(){s.trigger("contextmenu:visible")}),s.data("contextMenu",t).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",d.key),t.autoHide&&e(document).on("mousemove.contextMenuAutoHide",function(e){var n=s.offset();n.right=n.left+s.outerWidth(),n.bottom=n.top+s.outerHeight(),!t.$layer||t.hovering||e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom||setTimeout(function(){t.hovering||null==t.$menu||t.$menu.trigger("contextmenu:hide")},50)})},hide:function(e,t){var n=r(this);if(e||(e=n.data("contextMenu")||{}),t||!e.events||e.events.hide.call(n,e)!==!1){if(n.removeData("contextMenu").removeClass("context-menu-active"),e.$layer){setTimeout(function(e){return function(){e.remove()}}(e.$layer),10);try{delete e.$layer}catch(r){e.$layer=null}}i=null,e.$menu.find("."+e.classNames.hover).trigger("contextmenu:blur"),e.$selected=null,e.$menu.find("."+e.classNames.visible).removeClass(e.classNames.visible),r(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),e.$menu&&e.$menu[e.animation.hide](e.animation.duration,function(){e.build&&(e.$menu.remove(),r.each(e,function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:e[t]=void 0;try{delete e[t]}catch(t){}return!0}})),setTimeout(function(){n.trigger("contextmenu:hidden")},10)})}},create:function(n,r){function i(t){var n=e("<span></span>");if(t._accesskey)t._beforeAccesskey&&n.append(document.createTextNode(t._beforeAccesskey)),e("<span></span>").addClass("context-menu-accesskey").text(t._accesskey).appendTo(n),t._afterAccesskey&&n.append(document.createTextNode(t._afterAccesskey));else if(t.isHtmlName){if("undefined"!=typeof t.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");n.html(t.name)}else n.text(t.name);return n}void 0===r&&(r=n),n.$menu=e('<ul class="context-menu-list"></ul>').addClass(n.className||"").data({contextMenu:n,contextMenuRoot:r}),e.each(["callbacks","commands","inputs"],function(e,t){n[t]={},r[t]||(r[t]={})}),r.accesskeys||(r.accesskeys={}),e.each(n.items,function(s,o){var u=e('<li class="context-menu-item"></li>').addClass(o.className||""),a=null,f=null;if(u.on("click",e.noop),"string"!=typeof o&&"cm_separator"!==o.type||(o={type:"cm_seperator"}),o.$node=u.data({contextMenu:n,contextMenuRoot:r,contextMenuKey:s}),"undefined"!=typeof o.accesskey)for(var c,h=t(o.accesskey),p=0;c=h[p];p++)if(!r.accesskeys[c]){r.accesskeys[c]=o;var m=o.name.match(new RegExp("^(.*?)("+c+")(.*)$","i"));m&&(o._beforeAccesskey=m[1],o._accesskey=m[2],o._afterAccesskey=m[3]);break}if(o.type&&l[o.type])l[o.type].call(u,o,n,r),e.each([n,r],function(t,r){r.commands[s]=o,!e.isFunction(o.callback)||void 0!==r.callbacks[s]&&void 0!==n.type||(r.callbacks[s]=o.callback)});else{switch("cm_seperator"===o.type?u.addClass("context-menu-separator "+r.classNames.notSelectable):"html"===o.type?u.addClass("context-menu-html "+r.classNames.notSelectable):"sub"===o.type||(o.type?(a=e("<label></label>").appendTo(u),i(o).appendTo(a),u.addClass("context-menu-input"),n.hasTypes=!0,e.each([n,r],function(e,t){t.commands[s]=o,t.inputs[s]=o})):o.items&&(o.type="sub")),o.type){case"cm_seperator":break;case"text":f=e('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+s).val(o.value||"").appendTo(a);break;case"textarea":f=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+s).val(o.value||"").appendTo(a),o.height&&f.height(o.height);break;case"checkbox":f=e('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+s).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"radio":f=e('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+o.radio).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"select":f=e('<select name=""></select>').attr("name","context-menu-input-"+s).appendTo(a),o.options&&(e.each(o.options,function(t,n){e("<option></option>").val(t).text(n).appendTo(f)}),f.val(o.selected));break;case"sub":i(o).appendTo(u),o.appendTo=o.$node,u.data("contextMenu",o).addClass("context-menu-submenu"),o.callback=null,"function"==typeof o.items.then?v.processPromises(o,r,o.items):v.create(o,r);break;case"html":e(o.html).appendTo(u);break;default:e.each([n,r],function(t,r){r.commands[s]=o,!e.isFunction(o.callback)||void 0!==r.callbacks[s]&&void 0!==n.type||(r.callbacks[s]=o.callback)}),i(o).appendTo(u)}o.type&&"sub"!==o.type&&"html"!==o.type&&"cm_seperator"!==o.type&&(f.on("focus",d.focusInput).on("blur",d.blurInput),o.events&&f.on(o.events,n)),o.icon&&(e.isFunction(o.icon)?o._icon=o.icon.call(this,this,u,s,o):"string"==typeof o.icon&&"fa-"===o.icon.substring(0,3)?o._icon=r.classNames.icon+" "+r.classNames.icon+"--fa fa "+o.icon:o._icon=r.classNames.icon+" "+r.classNames.icon+"-"+o.icon,u.addClass(o._icon))}o.$input=f,o.$label=a,u.appendTo(n.$menu),!n.hasTypes&&e.support.eventSelectstart&&u.on("selectstart.disableTextSelect",d.abortevent)}),n.$node||n.$menu.css("display","none").addClass("context-menu-root"),n.$menu.appendTo(n.appendTo||document.body)},resize:function(t,n){var r;t.css({position:"absolute",display:"block"}),t.data("width",(r=t.get(0)).getBoundingClientRect?Math.ceil(r.getBoundingClientRect().width):t.outerWidth()+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(){v.resize(e(this),!0)}),n||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return e(this).data("width")})},update:function(t,n){var r=this;void 0===n&&(n=t,v.resize(t.$menu)),t.$menu.children().each(function(){var i,s=e(this),o=s.data("contextMenuKey"),u=t.items[o],a=e.isFunction(u.disabled)&&u.disabled.call(r,o,n)||u.disabled===!0;if(i=e.isFunction(u.visible)?u.visible.call(r,o,n):"undefined"==typeof u.visible||u.visible===!0,s[i?"show":"hide"](),s[a?"addClass":"removeClass"](n.classNames.disabled),e.isFunction(u.icon)&&(s.removeClass(u._icon),u._icon=u.icon.call(this,r,s,o,u),s.addClass(u._icon)),u.type)switch(s.find("input, select, textarea").prop("disabled",a),u.type){case"text":case"textarea":u.$input.val(u.value||"");break;case"checkbox":case"radio":u.$input.val(u.value||"").prop("checked",!!u.selected);break;case"select":u.$input.val(u.selected||"")}u.$menu&&v.update.call(r,u,n)})},layer:function(t,n){var r=t.$layer=e('<div id="context-menu-layer"></div>').css({height:o.height(),width:o.width(),display:"block",position:"fixed","z-index":n,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",d.abortevent).on("mousedown",d.layerClick);return void 0===document.body.style.maxWidth&&r.css({position:"absolute",height:e(document).height()}),r},processPromises:function(e,t,n){function r(e,t,n){void 0===n&&i(void 0),s(e,t,n)}function i(e,t,n){void 0===n?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),s(e,t,n)}function s(e,t,n){void 0!==t.$menu&&t.$menu.is(":visible")&&(e.$node.removeClass(t.classNames.iconLoadingClass),e.items=n,v.create(e,t,!0),v.update(e,t),t.positionSubmenu.call(e.$node,e.$menu))}e.$node.addClass(t.classNames.iconLoadingClass),n.then(r.bind(this,e,t),i.bind(this,e,t))}};e.fn.contextMenu=function(t){var n=this,r=t;if(this.length>0)if(void 0===t)this.first().trigger("contextmenu");else if(void 0!==t.x&&void 0!==t.y)this.first().trigger(e.Event("contextmenu",{pageX:t.x,pageY:t.y,mouseButton:t.button}));else if("hide"===t){var i=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;i&&i.trigger("contextmenu:hide")}else"destroy"===t?e.contextMenu("destroy",{context:this}):e.isPlainObject(t)?(t.context=this,e.contextMenu("create",t)):t?this.removeClass("context-menu-disabled"):t||this.addClass("context-menu-disabled");else e.each(f,function(){this.selector===n.selector&&(r.data=this,e.extend(r.data,{trigger:"demand"}))}),d.contextmenu.call(r.target,r);return this},e.contextMenu=function(e,t){"string"!=typeof e&&(t=e,e="create"),"string"==typeof t?t={selector:t}:void 0===t&&(t={});var n=g.extend(!0,{},c,t||{}),r=g(document),i=r,o=!1;switch(n.context&&n.context.length?(i=g(n.context).first(),n.context=i.get(0),o=!g(n.context).is(document)):n.context=document,e){case"create":if(!n.selector)throw new Error("No selector specified");if(n.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+n.selector+'" as it contains a reserved className');if(!n.build&&(!n.items||g.isEmptyObject(n.items)))throw new Error("No Items specified");if(u++,n.ns=".contextMenu"+u,o||(a[n.selector]=n.ns),f[n.ns]=n,n.trigger||(n.trigger="right"),!s){var l="click"===n.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",h={"contextmenu:focus.contextMenu":d.focusItem,"contextmenu:blur.contextMenu":d.blurItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.itemMouseenter,"mouseleave.contextMenu":d.itemMouseleave};h[l]=d.itemClick,r.on({"contextmenu:hide.contextMenu":d.hideMenu,"prevcommand.contextMenu":d.prevItem,"nextcommand.contextMenu":d.nextItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.menuMouseenter,"mouseleave.contextMenu":d.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",d.inputClick).on(h,".context-menu-item"),s=!0}switch(i.on("contextmenu"+n.ns,n.selector,n,d.contextmenu),o&&i.on("remove"+n.ns,function(){g(this).contextMenu("destroy")}),n.trigger){case"hover":i.on("mouseenter"+n.ns,n.selector,n,d.mouseenter).on("mouseleave"+n.ns,n.selector,n,d.mouseleave);break;case"left":i.on("click"+n.ns,n.selector,n,d.click)}n.build||v.create(n);break;case"destroy":var p;if(o){var m=n.context;g.each(f,function(e,t){if(!t)return!0;if(!n(m).is(t.selector))return!0;p=n(".context-menu-list").filter(":visible"),p.length&&p.data().contextMenuRoot.$trigger.is(n(t.context).find(t.selector))&&p.trigger("contextmenu:hide",{force:!0});try{f[t.ns].$menu&&f[t.ns].$menu.remove(),delete f[t.ns]}catch(n){f[t.ns]=null}return n(t.context).off(t.ns),!0})}else if(n.selector){if(a[n.selector]){p=g(".context-menu-list").filter(":visible"),p.length&&p.data().contextMenuRoot.$trigger.is(n.selector)&&p.trigger("contextmenu:hide",{force:!0});try{f[a[n.selector]].$menu&&f[a[n.selector]].$menu.remove(),delete f[a[n.selector]]}catch(g){f[a[n.selector]]=null}r.off(a[n.selector])}}else r.off(".contextMenu .contextMenuAutoHide"),g.each(f,function(e,t){g(t.context).off(t.ns)}),a={},f={},u=0,s=!1,g("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!g.support.htmlCommand&&!g.support.htmlMenuitem||"boolean"==typeof t&&t)&&g('menu[type="context"]').each(function(){this.id&&g.contextMenu({selector:"[contextmenu="+this.id+"]",items:g.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+e+'"')}return this},e.contextMenu.setInputValues=function(t,n){void 0===n&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":t.value=n[e]||"";break;case"checkbox":t.selected=!!n[e];break;case"radio":t.selected=(n[t.radio]||"")===t.value;break;case"select":t.selected=n[e]||""}})},e.contextMenu.getInputValues=function(t,n){return void 0===n&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":case"select":n[e]=t.$input.val();break;case"checkbox":n[e]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(n[t.radio]=t.value)}}),n},e.contextMenu.fromMenu=function(t){var n=e(t),i={};return r(i,n.children()),i},e.contextMenu.defaults=c,e.contextMenu.types=l,e.contextMenu.handle=d,e.contextMenu.op=v,e.contextMenu.menus=f});