require(["css!../library/bootstrap/css/bootstrap","jquery","plugins/jqueryi18n"],function(){var e=window.localStorage.getItem("language")||"zh",t=$("#inputusername"),n=$("#inputPassword"),r=$("#inputPasswordConfirm"),i=$("#inputEmail"),s=$(".enroll_error"),o=/^[A-z0-9]{6,12}$/,u=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;e==="zh"?"":e,$.i18n.properties({name:"strings",path:"../languages/",mode:"both",language:e,cache:!1,checkAvailableLanguages:!0,async:!1,callback:function(){$(".register_title").html($.i18n.prop("register_title")),$(".register_title_systemname").html($.i18n.prop("register_title_systemname")),$(".register_reminder").html($.i18n.prop("register_reminder")),$(".register_username").html($.i18n.prop("register_username")),$(".register_psw").html($.i18n.prop("register_psw")),$(".register_psw_confirm").html($.i18n.prop("register_psw_confirm")),$(".register_email").html($.i18n.prop("register_email")),$(".register_okbtn").html($.i18n.prop("register_okbtn"))}}),t.focus(),$("body").on("keydown",function(e){var e=e||window.event;e.keyCode===13&&$(".register_okbtn").click()}),$(".enroll_logo").on("click",function(){window.location.href="../index.html"}),$(".register_okbtn").on("click",function(){var e=t.val();e=$.trim(e);var a=n.val();a=$.trim(a);var f=r.val();f=$.trim(f);var l=i.val();l=$.trim(l),s.html("&nbsp;");if(e==="")$(".username_error_prompt").text($.i18n.prop("register_error_username")),t.focus();else if(a==="")$(".password_error_prompt").text($.i18n.prop("register_error_psw1")),n.focus();else if(!o.test(a))$(".password_error_prompt").text($.i18n.prop("register_error_psw2"));else if(f=="")$(".againPsd_error_prompt").text($.i18n.prop("register_error_psw3")),r.focus();else if(a!==f)$(".againPsd_error_prompt").text($.i18n.prop("register_error_psw4"));else if(l==="")$(".email_error_prompt").text($.i18n.prop("register_error_email")),i.focus();else if(!u.test(l))$(".email_error_prompt").text($.i18n.prop("register_error_email2"));else{var c=Project_ParamConfig.userConfig.enrollUrl,h={userName:e,passWord:a,emailAddress:l};$.ajax({url:c,data:h,method:"POST",dataType:"JSON",success:function(e){e.state===10010?$(".username_error_prompt").html($.i18n.prop("register_error_result1")):e.state===10101?$(".email_error_prompt").html($.i18n.prop("register_error_result2")):e.state===10102?$(".email_error_prompt").html($.i18n.prop("register_error_result3")):e.state===1&&($("input").val(""),$(".enrollres_error_prompt").html($.i18n.prop("register_success_msg",l)))},error:function(e){$(".email_error_prompt").html($.i18n.prop("register_error_result"))}})}})});