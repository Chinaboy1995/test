define("func/cdgl",["leaflet","func/base","control/panel","plugins/mcscroll","plugins/ztree","data/ajax","layout/menu"],function(e){e.ICT.Func.add("cdgl",{id:"cdgl",Class:e.Class.extend({initialize:function(){this.menu=e.ict.app.menu,this.util=e.ict.app.util,this.dateUtil=e.ict.app.util.dateTime,this.ajax=new e.ICT.Ajax,this.config=Project_ParamConfig.cdglConfig;if(e.ict.app.sessionStorage.getItem("userInfo")!=null){var t=e.ict.app.sessionStorage.getItem("userInfo");this.loginUserId=t.userId}else this.loginUserId="";this.menuid="ict_menu_main_cdgl",this._popPanel=null,this._delType="",this._editDelId="",this._AddEditType="",this._editShipObj={},this._popPanelShipFleetAddEdit=null,this._popPanelShipAddEdit=null,this._popPanelDel=null,this.zTreeData=[],this.zTree1=null,this.zTreeClickNodeID="",this.zTreeClickNodeType="",this._pageInfoInit()},start:function(){this.menu.mainmenu.deactiveMenuExceptOne(this.menuid);if(!e.ICT.Func.UserLogin.getInstance().isLogin()){e.ICT.Func.UserLogin.getInstance().alertLoginDialog(),this.menu.mainmenu.deactiveMenu(this.menuid);return}if(this._popPanel)return;this._initUI(),this._initEvts(),this._initTree()},stop:function(){this._popPanel&&this._popPanel.remove()},_initUI:function(){var t=window.localStorage.getItem("language"),n=$.i18n.prop("func_cdgl_titlename"),r={title:n,width:990,height:515,top:100,left:200,contentHTML:this._getContentHTML()},i=this._popPanel=new e.ICT.PopPanel(r);i.show(),$("#cdgl_input_sj_end").val(this.formatDateH(new Date));var s=this.getNewDateTimeBeforHour(24);$("#cdgl_input_sj_start").val(this.formatDateH(s))},formatDateH:function(e){var t=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate(),i=e.getHours()<10?"0"+e.getHours():e.getHours(),s=t+"-"+n+"-"+r+" "+i;return s},getNewDateTimeBeforHour:function(e){var t=new Date;return t=t.valueOf(),t-=e*60*60*1e3,t=new Date(t),t},_initEvts:function(){self=this,this._popPanel.on("popPanelRemove",function(){this._popPanel=null,this.menu.mainmenu.deactiveMenu(this.menuid)},this)},_getContentHTML:function(){var e=$.i18n.prop("func_cdgl_lb_cdlb"),t=$.i18n.prop("func_cdgl_lb_sjll"),n=$.i18n.prop("func_cdgl_where_lb_qzss"),r=$.i18n.prop("func_cdgl_where_lb_z"),i=$.i18n.prop("func_cdgl_lb_add"),s=$.i18n.prop("common_btn_ok"),o=[];return o.push('<TABLE border=0 style="width:970px;height:445px;">'),o.push("	<TR>"),o.push('		<TD width=260px height="100%";align=center valign=top>'),o.push('			<TABLE border=0 style="width:100%;height:100%;">'),o.push('				<TR style="width:100%;height:25px;">'),o.push('					<TD style="width:80px;height:25px;" align=left valign=top>'),o.push('						<label id="cdgl_lb_cdlb" class="cdgl_labelfont">'+e+"</label>"),o.push("					</TD>"),o.push('					<TD style="width:100px;height:25px;" align=right valign=top>'),o.push('						<div id="cdgl_btn_add" class="cdgl_img_btn_add" onclick="self._shipFleet_Add();">'+i+"</div>"),o.push("					</TD>"),o.push("				</TR>"),o.push('				<TR style="width:100%;height:5px;">'),o.push("				</TR>"),o.push('				<TR style="width:100%;height:420px;">'),o.push('					<TD style="width:100%;height:420px;border:1px solid #b5b5b5;" align=left valign=top colspan="2">'),o.push('						<div style="width:100%;height:100%;">'),o.push('							<ul id="treeDiv" class="tree"></ul>'),o.push("						</div>"),o.push("					</TD>"),o.push("				</TR>"),o.push("			</TABLE>"),o.push("		</TD>"),o.push('		<TD width=10px width="100%" height="100%";align=center valign=top>'),o.push("		</TD>"),o.push('		<TD width=700px height="100%";align=center valign=top>'),o.push('			<TABLE border=0 style="width:100%;height:100%;">'),o.push('				<TR style="width:100%;height:25px;">'),o.push('					<TD style="width:100%;height:25px;" align=left valign=top>'),o.push('						<label id="cdgl_lb_sjll" class="cdgl_labelfont">'+t+"</label>"),o.push("					</TD>"),o.push("				</TR>"),o.push('				<TR style="width:100%;height:5px;">'),o.push("				</TR>"),o.push('				<TR style="width:100%;height:425px;">'),o.push('					<TD style="width:100%;height:420px;border:1px solid #b5b5b5;padding-left:20px;">'),o.push('						<table style="width:100%;height:100%;">'),o.push('							<tr style="width100%;height:50px;padding-top:20px;">'),o.push('								<td style="width:70px;"><label id="cdgl_where_lb_qzss" class="cdgl_labelfont">'+n+"</label></td>"),o.push('								<td style="width:130px;"><input class="Wdate up_po_custom_in" type="text" id="cdgl_input_sj_start" style="height:25px;line-height:25px;width:126px;border:1px solid #b5b5b5;" onFocus="WdatePicker({readOnly:true,dateFmt:\'yyyy-MM-dd HH\',isShowClear:false,startDate:\'%y-%M-01 00:00:00\',alwaysUseStartDate:true,maxDate:\'%y-%M-%d %H:%m:%s\'})"/></td>'),o.push('								<td style="width:30px;"><label id="cdgl_where_lb_z" class="cdgl_labelfont">'+r+"</label></td>"),o.push('								<td style="width:130px;"><input class="Wdate up_po_custom_in" type="text" id="cdgl_input_sj_end" style="height:25px;line-height:25px;width:126px;border:1px solid #b5b5b5;" onFocus="WdatePicker({readOnly:true,dateFmt:\'yyyy-MM-dd HH\',isShowClear:false,startDate:\'%y-%M-01 00:00:00\',alwaysUseStartDate:true,maxDate:\'%y-%M-%d %H:%m:%s\'})"/></td>'),o.push('								<td style="width:60px;"><div id="cdgl_btn_search" class="cdgl_img_btn_ok" onclick="self._eventSearch(true);">'+s+"</div></td>"),o.push('								<td style="width:300px;"></td>'),o.push("							</tr>"),o.push('							<tr style="width:100%;height:5px;"><td colspan="6"></td></tr>'),o.push('							<tr style="width:100%;height:350px;">'),o.push('								<td colspan="6">'),o.push('									<div id="cdgl_dialog_event_list" style="width:100%;height:340px;padding-left:10px;padding-right:10px;"></div>'),o.push('									<div id="cdgl_div_page" style="width:100%;height:30px;text-align:right;padding-right:20px;"></div>'),o.push("								</td>"),o.push("							</tr>"),o.push("						</table>"),o.push("					</TD>"),o.push("				</TR>"),o.push("			</TABLE>"),o.push("		</TD>"),o.push("	</TR>"),o.push("</TABLE>"),o.join("")},_initTree:function(){this.zTreeClickNodeID="",this.zTreeClickNodeType="";var e=self.config.getTreeUrl,t={},n=new Date;t.timespane=n.getTime().toString(),t.user_id=this.loginUserId,self.ajax.post(e,t,!0,this,function(e){this._initTreeSucess(e)},function(e){this._initTreeError(e)})},_initTreeSucess:function(e){if(e.state!=1){var t=$.i18n.prop("func_cdgl_error_msg_getFleetInfo");this._showErrorMsg(t)}else{var n=[],r=e.msg;for(var i=0;i<r.length;i++){var s={};s.id=r[i].id,r[i].name_cn!=null&&r[i].name_cn!=""?s.name=r[i].name_cn:s.name=r[i].name_en,s.remark=r[i].remark,s.open=!0,s.type="1";var o=r[i].shiplist;for(var u=0;u<o.length;u++)o[u].id=o[u].id,o[u].shipfleetid=o[u].shipfleetid,o[u].shipid=o[u].shipid,o[u].name=o[u].shipname,o[u].mmsi=o[u].mmsi,o[u].type="2";s.nodes=o,n.push(s)}this.zTreeData=n,this.zTree1=$("#treeDiv").zTree(this._getZtreeSetting(),this._clone(n,""))}},_getZtreeSetting:function(){var e={addDiyDom:this._addDiyDom};return e},_addDiyDom:function(e,t){$("#"+t.tId+"_span").css("background-color","#ffffff"),$("#"+t.tId+"_span").css("display",":-moz-inline-box"),$("#"+t.tId+"_span").css("display","inline-block");var n=$("#"+t.tId+"_a"),r=t.id+"|"+t.type;t.type=="2"&&(r=t.mmsi+"|"+t.type);var i=$("#"+t.tId+"_span");i.bind("click",function(){self._zTreeNodeClick(r)});if(t.type=="1"){$("#"+t.tId+"_span").css("width","153px");var s="";s=s+"<button type='button' class='cdgl_tree_edit' id='img_shipfleet_edit"+t.id+"'></button>",s=s+"<button type='button' class='cdgl_tree_del' id='img_shipfleet_del"+t.id+"'></button>",n.append(s);var o=$("#img_shipfleet_del"+t.id);o&&o.bind("click",function(){self._shipFleet_Del(t.id)});var u=$("#img_shipfleet_edit"+t.id);u&&u.bind("click",function(){self._shipFleet_Edit(t.id)})}else if(t.type=="2"){$("#"+t.tId+"_span").css("width","135px");var s="";s=s+"<button type='button' class='cdgl_tree_edit' id='img_ship_edit"+t.id+"'></button>",s=s+"<button type='button' class='cdgl_tree_del' id='img_ship_del"+t.id+"'></button>",n.append(s);var o=$("#img_ship_del"+t.id);o&&o.bind("click",function(){self._ship_Del(t.id)});var u=$("#img_ship_edit"+t.id),a=t.id+"|"+t.shipfleetid+"|"+t.shipid+"|"+t.name+"|"+t.mmsi;u&&u.bind("click",function(){self._ship_Edit(a)})}},_clone:function(e,t){var n;if(e instanceof Array){n=[];var r=e.length;while(r--)n[r]=this._clone(e[r],t);return n}if(typeof e=="function")return e;if(e instanceof Object){n={};for(var i in e)n[i]=this._clone(e[i],t),i=="name"&&(n[i]+=t);return n}return e},_initTreeError:function(e){var t=$.i18n.prop("func_cdgl_error_msg_getFleetInfo");this._showErrorMsg(t)},_shipFleet_Edit:function(e){if(this._popPanelShipFleetAddEdit)return;var t=$.i18n.prop("func_cdgl_editfleet_titlename");self._dialogShipFleetAddEditOpen(t),this._AddEditType="edit",this._editDelId=e;for(var n=0;n<this.zTreeData.length;n++)if(this.zTreeData[n].id==e){$("#dialogShipFleetAddEditName").val(this.zTreeData[n].name),$("#dialogShipFleetAddEditRemark").val(this.zTreeData[n].remark);break}},_shipFleet_Add:function(){if(this._popPanelShipFleetAddEdit)return;var e=$.i18n.prop("func_cdgl_addfleet_titlename");self._dialogShipFleetAddEditOpen(e),this._AddEditType="add",$("#dialogShipFleetAddEditName").val("")},_dialogShipFleetAddEditOpen:function(t){var n={title:t,width:410,height:250,top:200,left:450,contentHTML:this._getContentHtmlDialogShipFleetAddEdit()},r=this._popPanelShipFleetAddEdit=new e.ICT.PopPanel(n);r.show(),$("#cdgl_addeditfleet_inputfleenametip").val(""),this._popPanelShipFleetAddEdit.on("popPanelRemove",function(){this._popPanelShipFleetAddEdit=null},this)},_getContentHtmlDialogShipFleetAddEdit:function(){var e=$.i18n.prop("func_cdgl_addeditfleet_name"),t=$.i18n.prop("func_cdgl_addeditfleet_remarks"),n=$.i18n.prop("common_btn_ok"),r=$.i18n.prop("common_btn_cancel"),i=[];return i.push('<TABLE border=0 style="width:390px;height:180px;">'),i.push("	<TR>"),i.push('		<TD style="width:95px;height:30px;text-align:left;vertical-align:middle;padding-left:30px;">'),i.push('			<label class="cdgl_labelfont">'+e+"</label>"),i.push("		</TD>"),i.push('		<TD style="width:295px;height:30px;text-align:left;vertical-align:middle;">'),i.push('			<input type="text" id="dialogShipFleetAddEditName" class="cdgl_labelfont" style="width:270px"/>'),i.push("		</TD>"),i.push("	</TR>"),i.push("	<TR>"),i.push('		<TD style="width:390px;height:20px;line-height:20px;text-align:left;vertical-align:middle;padding-left:30px;" colspan="2">'),i.push('			<input type="text" id="cdgl_addeditfleet_inputfleenametip" class="cdgl_font_error" readonly="true" style="width:100%;"/>'),i.push("		</TD>"),i.push("	</TR>"),i.push("	<TR>"),i.push('		<TD style="width:95px;height:30px;text-align:left;vertical-align:middle;padding-left:30px;">'),i.push('			<label class="cdgl_labelfont">'+t+"</label>"),i.push("		</TD>"),i.push('		<TD style="width:295px;height:30px;text-align:left;vertical-align:middle;">'),i.push('			<textarea id="dialogShipFleetAddEditRemark" style="width:270px;height:80px;"></textarea>'),i.push("		</TD>"),i.push("	</TR>"),i.push("	<TR>"),i.push('		<TD width=390px height="58px";align=center valign=center padding-left:60px; colspan="2">'),i.push('		    <table style="height:100%;width:100%">'),i.push('						<tr style="height:100%;width:100%">'),i.push('									<td style="height:100%;width:100%;padding-left:135px;">'),i.push('										<div id="dialogShipFleetAddEditBtnOk" class="cdgl_dialog_btn_ok_cancel" onclick="self._dialogShipFleetAddEditBtnClickOk();">'+n+"</div>"),i.push("									</td>"),i.push("						</tr>"),i.push("			</table>"),i.push("		</TD>"),i.push("	</TR>"),i.push("</TABLE>"),i.join("")},_dialogShipFleetAddEditBtnClickCancel:function(){this._popPanelShipFleetAddEdit&&this._popPanelShipFleetAddEdit.remove(),this._popPanelShipFleetAddEdit=null},_dialogShipFleetAddEditBtnClickOk:function(){$("#cdgl_addeditfleet_inputfleenametip").val("");var e=$("#dialogShipFleetAddEditName").val();if(e==""){var t=$.i18n.prop("func_cdgl_addeditfleet_inputfleenametip");$("#cdgl_addeditfleet_inputfleenametip").val(t);return}var n=self.config.saveShipFleetUrl,r={},i=new Date;r.timespane=i.getTime().toString(),r.addEditType=this._AddEditType,this._AddEditType=="add"?r.id="":r.id=this._editDelId,r.name_en=e,r.name_cn=e,r.remark=$("#dialogShipFleetAddEditRemark").val(),r.user_id=this.loginUserId,self.ajax.post(n,r,!0,this,function(e){if(e.state!=1){var t=$.i18n.prop("func_cdgl_msg_tip_save_failed");$("#cdgl_addeditfleet_inputfleenametip").val(t)}else this._dialogShipFleetAddEditBtnClickCancel(),this._initTree()},function(e){var t=$.i18n.prop("func_cdgl_msg_tip_save_failed");$("#cdgl_addeditfleet_inputfleenametip").val(t)})},_shipFleet_Del:function(e){if(this._popPanelDel)return;this._editDelId=e,this._delType="fleet";var t=$.i18n.prop("func_cdgl_delfleet_titlename");self._dialogShipFleetDelOpen(t,"1")},_dialogShipFleetDelOpen:function(t,n){var r={title:t,width:410,height:220,top:200,left:450,contentHTML:this._getContentHtmlDialogDel(n)},i=this._popPanelDel=new e.ICT.PopPanel(r);i.show(),this._popPanelDel.on("popPanelRemove",function(){this._popPanelDel=null},this)},_getContentHtmlDialogDel:function(e){var t="";e=="1"?t=$.i18n.prop("func_cdgl_msg_tip_del_fleet"):t=$.i18n.prop("func_cdgl_msg_tip_del_ship");var n=$.i18n.prop("common_btn_ok"),r=$.i18n.prop("common_btn_cancel"),i=[];return i.push('<TABLE border=0 style="width:390px;height:160px;">'),i.push("	<TR>"),i.push('		<TD width=390px height="80px" style="padding-left:78px;padding-top:10px;">'),i.push('			<img src="./themes/images/baoChuan/error.png" style="width:40px;height:40px;"><label class="cdgl_labelfont_del">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'+t+"</label>"),i.push("		</TD>"),i.push("	</TR>"),i.push("	<TR>"),i.push('		<TD width=390px height="58px";align=center valign=center padding-left:60px;>'),i.push('		    <table style="height:100%;width:100%">'),i.push('						<tr style="height:100%;width:100%">'),i.push('									<td style="height:100%;width:50%;padding-left:67px;">'),i.push('										<div id="dialogDelBtnOk" class="cdgl_dialog_btn_ok_cancel" onclick="self._dialogDelBtnClickOk();">'+n+"</div>"),i.push("									</td>"),i.push('									<td style="height:100%;width:50%;padding-left:20px;">'),i.push('										<div id="dialogDelBtnCancel" class="cdgl_dialog_btn_ok_cancel" onclick="self._dialogDelBtnClickCancel();">'+r+"</div>"),i.push("									</td>"),i.push("						</tr>"),i.push("			</table>"),i.push("		</TD>"),i.push("	</TR>"),i.push("</TABLE>"),i.join("")},_dialogDelBtnClickCancel:function(){this._popPanelDel&&this._popPanelDel.remove(),this._popPanelDel=null},_dialogDelBtnClickOk:function(){var e=$.i18n.prop("func_cdgl_msg_tip_del_failed"),t=$.i18n.prop("func_cdgl_msg_tip_del_sucess");if(this._delType=="fleet"){var n=self.config.delShipFleetUrl,r={},i=new Date;r.timespane=i.getTime().toString(),r.id=this._editDelId,self.ajax.post(n,r,!0,this,function(t){t.state!=1?this._showErrorMsg(e):(this._dialogDelBtnClickCancel(),this._initTree())},function(t){this._showErrorMsg(e)})}else{var n=self.config.delShipUrl,r={},i=new Date;r.timespane=i.getTime().toString(),r.id=this._editDelId,self.ajax.post(n,r,!0,this,function(t){t.state!=1?this._showErrorMsg(e):(this._dialogDelBtnClickCancel(),this._initTree())},function(t){this._showErrorMsg(e)})}},_ship_Del:function(e){if(this._popPanelDel)return;this._editDelId=e,this._delType="ship";var t=$.i18n.prop("func_cdgl_delship_titlename");self._dialogShipFleetDelOpen(t,"0")},_ship_Edit:function(e){if(this._popPanelShipAddEdit)return;this._editShipObj={};var t=e.split("|");this._editShipObj.id=t[0],this._editShipObj.shipfleetid=t[1],this._editShipObj.shipid=t[2],this._editShipObj.shipname=t[3],this._editShipObj.mmsi=t[4],self._dialogShipAddEditOpen()},_dialogShipAddEditOpen:function(){var t=$.i18n.prop("func_cdgl_editship_titlename"),n={title:t,width:410,height:150,top:200,left:450,contentHTML:this._getContentHtmlDialogShipAddEdit()},r=this._popPanelShipAddEdit=new e.ICT.PopPanel(n);r.show(),$("#dialogShipAddEditFleet").empty();for(var i=0;i<this.zTreeData.length;i++)$("#dialogShipAddEditFleet").append("<option value='"+this.zTreeData[i].id+"'>"+this.zTreeData[i].name+"</option>");this._popPanelShipAddEdit.on("popPanelRemove",function(){this._popPanelShipAddEdit=null},this)},_getContentHtmlDialogShipAddEdit:function(){var e=$.i18n.prop("func_cdgl_editship_fleetname"),t=$.i18n.prop("common_btn_ok"),n=$.i18n.prop("common_btn_cancel"),r=[];return r.push('<TABLE border=0 style="width:390px;height:70px;">'),r.push("	<TR>"),r.push('		<TD style="width:95px;height:30px;text-align:right;vertical-align:middle;">'),r.push('			<label class="cdgl_labelfont">'+e+"</label>"),r.push("		</TD>"),r.push('		<TD style="width:295px;height:30px;text-align:left;vertical-align:middle;">'),r.push('			<select id="dialogShipAddEditFleet" class="cdgl_labelfont" style="width:275px"></select>'),r.push("		</TD>"),r.push("	</TR>"),r.push("	<TR>"),r.push('		<TD width=390px height="58px";align=center valign=center padding-left:60px; colspan="2">'),r.push('		    <table style="height:100%;width:100%">'),r.push('						<tr style="height:100%;width:100%">'),r.push('									<td style="height:100%;width:100%;padding-left:135px;">'),r.push('										<div id="dialogShipAddEditBtnOk" class="cdgl_dialog_btn_ok_cancel" onclick="self._dialogShipAddEditBtnClickOk();">'+t+"</div>"),r.push("									</td>"),r.push("						</tr>"),r.push("			</table>"),r.push("		</TD>"),r.push("	</TR>"),r.push("</TABLE>"),r.join("")},_dialogShipAddEditBtnClickCancel:function(){this._popPanelShipAddEdit&&this._popPanelShipAddEdit.remove(),this._popPanelShipAddEdit=null},_dialogShipAddEditBtnClickOk:function(){var e=$.i18n.prop("func_cdgl_editship_tip_selectfleet"),t=$.i18n.prop("func_cdgl_msg_tip_edit_sucess"),n=$.i18n.prop("func_cdgl_msg_tip_edit_failed"),r=$("#dialogShipAddEditFleet option:selected").val();if(r==""){this._showErrorMsg(e);return}var i={},s=new Date;i.timespane=s.getTime().toString(),i.id=this._editShipObj.id,i.shipfleetid=r;var o=self.config.saveShipUrl;self.ajax.post(o,i,!0,this,function(e){e.state!=1?this._showErrorMsg(n):this._initTree()},function(e){this._showErrorMsg(n)}),this._popPanelShipAddEdit&&this._popPanelShipAddEdit.remove(),this._popPanelShipAddEdit=null},_getzTreeNodeShipIdList:function(){var e="";if(this.zTreeClickNodeType==null)return e;if(this.zTreeClickNodeType=="")return e;if(this.zTreeClickNodeType=="1"){var t=null;for(var n=0;n<this.zTreeData.length;n++)if(this.zTreeData[n].id==this.zTreeClickNodeID){t=this.zTreeData[n];break}if(t!=null){nodeslist=t.nodes;for(var r=0;r<nodeslist.length;r++)e!=""?e=e+","+nodeslist[r].mmsi:e=nodeslist[r].mmsi}}else e=this.zTreeClickNodeID;return e},_zTreeNodeClick:function(e){var t=e.split("|");this.zTreeClickNodeID=t[0],this.zTreeClickNodeType=t[1],this._eventSearch(!0)},_eventGetSearchWhere:function(){var e=this._getzTreeNodeShipIdList(),t=$("#cdgl_input_sj_start").val()+":00:00",n=$("#cdgl_input_sj_end").val()+":59:59",r={},i=new Date;return r.timespane=i.getTime().toString(),r.shipidstr=e,r.ischeckshipid="1",r.startsj=t,r.endsj=n,r.pagesize=this.pagesize,r.pagenum=this.pagenum,r},_eventSearch:function(e){e&&this._pageInfoInit();var t=$.i18n.prop("func_cdgl_error_msg_getEventInfo"),n=this._eventGetSearchWhere(),r=self.config.getEventListUrl;self.ajax.post(r,n,!0,this,function(e){e.state!=1?this._showErrorMsg(t):this._showEventListSucess(e)},function(e){this._showErrorMsg(t)})},_showEventListSucess:function(e){this._showDivEventList(e),this.reccount=e.reccount,this.pagecount=e.pagecount,this.pagesize=e.pagesize,this.pagenum=e.pagenum;var t=!0;for(var n=0;n<this.curShowPageLabelAry.length;n++)this.curShowPageLabelAry[n]==this.pagenum&&(t=!1);var r=e.rec;r!=null&&r.length>0&&(t&&this._showDivPageInfo(),this._DivPageNumLabelSetCur())},_showDivEventList:function(e){var t=$.i18n.prop("func_cdgl_datagrid_xh"),n=$.i18n.prop("func_cdgl_datagrid_shipName"),r=$.i18n.prop("func_cdgl_datagrid_time"),i=$.i18n.prop("func_cdgl_datagrid_state"),s=$.i18n.prop("func_cdgl_datagrid_portName"),o=e.rec,u="#e6effe",a='<table style="width:100%;font-family:Microsoft Yahei;font-size:12px;" border="0" cellspacing="0">';if(o!=null&&o.length>0){a=a+'<tr style="background-color:'+u+';width:100%;height:30px;line-height:30px;text-align:left;">',a+='<td style="width:50px;height:100%;text-align:center;vertical-align:middle;">',a+=t,a+="</td>",a+='<td style="width:150px;height:100%;text-align:left;vertical-align:middle;">',a+=n,a+="</td>",a+='<td style="width:80px;height:100%;text-align:left;vertical-align:middle;">',a+="MMSI",a+="</td>",a+='<td style="width:160px;height:100%;text-align:left;vertical-align:middle;">',a+=r,a+="</td>",a+='<td style="width:80px;height:100%;text-align:left;vertical-align:middle;">',a+=i,a+="</td>",a+='<td style="width:180px;height:100%;text-align:left;vertical-align:middle;">',a+=s,a+="</td>",a+="</tr>";for(var f=0;f<o.length;f++){u=="#e6effe"?u="#ffffff":u="#e6effe",a=a+'<tr style="background-color:'+u+';width:100%;height:30px;line-height:30px;text-align:left;">',a+='<td style="width:50px;height:100%;text-align:center;vertical-align:middle;">',a+=(f+1).toString(),a+="</td>",a+='<td style="width:150px;height:100%;text-align:left;vertical-align:middle;">',a+=o[f].ship_name,a+="</td>",a+='<td style="width:80px;height:100%;text-align:left;vertical-align:middle;">',a+=o[f].mmsi,a+="</td>",a+='<td style="width:160px;height:100%;text-align:left;vertical-align:middle;">',a+=o[f].sj_str,a+="</td>",a+='<td style="width:80px;height:100%;text-align:left;vertical-align:middle;">';var l=window.localStorage.getItem("language"),c=o[f].state_name,h="";c=="进港"?h=$.i18n.prop("func_cdgl_datagrid_state_jg"):c=="出港"&&(h=$.i18n.prop("func_cdgl_datagrid_state_cg")),a+=h,a+="</td>",a+='<td style="width:180px;height:100%;text-align:left;vertical-align:middle;">',a+=o[f].port_name,a+="</td>",a+="</tr>"}}else{var p=$.i18n.prop("func_cdgl_msg_tip_event_noseachresult");a+='<tr style="width:100%;height:330px;line-height:330px;text-align:center;">',a+='<td style="width:100%;height:100%;line-height:330px;text-align:center;vertical-align:middle;">',a=a+"<label>"+p+"</label>",a+="</td>",a+="</tr>"}a+="</table>",$("#cdgl_dialog_event_list").html(a)},_pageInfoInit:function(){this.showpagelabelcount=5,this.curShowPageLabelAry=[],this.pagesize=10,this.pagenum=1,this.reccount=0,this.pagecount=0},_showDivPageInfo:function(){this.curShowPageLabelAry=[];var e=this.pagecount-this.pagenum,t=parseInt(this.showpagelabelcount.toString())-parseInt("1");if(e>=t){this.curShowPageLabelAry.push(this.pagenum);for(var n=1;n<this.showpagelabelcount;n++){var r=parseInt(this.pagenum.toString())+parseInt(n.toString());r<=this.pagecount&&this.curShowPageLabelAry.push(r)}}else{var i=parseInt(this.pagecount.toString()),s=parseInt(this.pagecount.toString())-parseInt(this.showpagelabelcount.toString())+parseInt("1");s<=0&&(s=1);for(var o=s;o<=i;o++)this.curShowPageLabelAry.push(o)}var u=$.i18n.prop("func_cdgl_page_first"),a=$.i18n.prop("func_cdgl_page_last"),f=$.i18n.prop("func_cdgl_page_previous"),l=$.i18n.prop("func_cdgl_page_next"),c='<label id="divPageFirst" class="cdgl_page_first"  onclick="self._divPageClickFirst();">'+u+"</label>";c+="<label>&nbsp</label>";for(var h=0;h<this.curShowPageLabelAry.length;h++)c=c+'<label class="cdgl_page_numlabel_noselect" id="divPageNumLabel_'+this.curShowPageLabelAry[h]+'" onclick="self._divPageClickNum('+this.curShowPageLabelAry[h]+');">'+this.curShowPageLabelAry[h]+"</label>";c+="<label>&nbsp</label>",c=c+'<label id="divPageLast" class="cdgl_page_last"  onclick="self._divPageClickLast();">'+a+"</label>",c+="<label>&nbsp</label>",c=c+'<label id="divPageLast" class="cdgl_page_pre"  onclick="self._divPageClickPre();">'+f+"</label>",c+="<label>&nbsp</label>",c=c+'<label id="divPageLast" class="cdgl_page_next" onclick="self._divPageClickNext();">'+l+"</label>",$("#cdgl_div_page").html(c)},_DivPageNumLabelSetCur:function(){for(var e=0;e<this.curShowPageLabelAry.length;e++)this.curShowPageLabelAry[e]==this.pagenum?$("#divPageNumLabel_"+this.curShowPageLabelAry[e]).attr("class","cdgl_page_numlabel_select"):$("#divPageNumLabel_"+this.curShowPageLabelAry[e]).attr("class","cdgl_page_numlabel_noselect")},_divPageClickFirst:function(){if(this.pagenum<=1)return;this.pagenum=1,this._eventSearch(!1)},_divPageClickPre:function(){if(this.pagenum<=1)return;this.pagenum=parseInt(this.pagenum.toString())-parseInt("1"),this._eventSearch(!1)},_divPageClickNum:function(e){this.pagenum=e,this._eventSearch(!1)},_divPageClickNext:function(){if(this.pagenum>=this.pagecount)return;this.pagenum=parseInt(this.pagenum.toString())+parseInt("1"),this._eventSearch(!1)},_divPageClickLast:function(){if(this.pagenum>=this.pagecount)return;this.pagenum=this.pagecount,this._eventSearch(!1)},_showMsg:function(t){e.ict.app.util.dialog.warn($.i18n.prop("dialog_alert_title"),t)},_showErrorMsg:function(t){e.ict.app.util.dialog.error($.i18n.prop("dialog_alert_title"),t)}})})});