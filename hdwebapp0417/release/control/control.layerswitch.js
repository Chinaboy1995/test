define("control/layerswitch",["leaflet","core/namespace"],function(e){e.ICT.Control.LayerSwitch=e.Control.extend({includes:e.Mixin.Events,initialize:function(t){e.setOptions(this,t),this.changeLayers=Project_ParamConfig.changeLayers},onAdd:function(e){return this._map=e,this._initLayout(),this._initEvts(),this._container},onRemove:function(e){},getBaseLayerById:function(e){for(var t=0;t<this.changeLayers.length;t++)if(this.changeLayers[t].id==e)return this.changeLayers[t].layer},hideAllBaseLayer:function(){for(var e=0;e<this.changeLayers.length;e++){var t=this.changeLayers[e].layer;t.setOpacity(0)}},showBaseLayer:function(e){var t=this.getBaseLayerById(e);t.options.opacity===0&&(this.hideAllBaseLayer(),t.setOpacity(1),this.fire("baseLayerChangeEvent",{curBaseLayer:t}))},_initLayout:function(){var t="ict-leaflet-control-layers",n=this._container=e.DomUtil.create("div",t),r=[];r.push("<ul>");for(var i=0,s=this.changeLayers.length;i<s;i++)this.changeLayers[i].active?Project_ParamConfig.lang==="zh"?r.push('<li class="active" data-id="'+this.changeLayers[i].id+'"><a>'+this.changeLayers[i].name+"</a></li>"):r.push('<li class="active" data-id="'+this.changeLayers[i].id+'"><a>'+this.changeLayers[i].name_en+"</a></li>"):Project_ParamConfig.lang==="zh"?r.push('<li data-id="'+this.changeLayers[i].id+'"><a>'+this.changeLayers[i].name+"</a></li>"):r.push('<li data-id="'+this.changeLayers[i].id+'"><a>'+this.changeLayers[i].name_en+"</a></li>");r.push("</ul>"),r=r.join(""),n.innerHTML=r},_initEvts:function(){var e=this;$(this._container).find("ul>li").on("click",function(t){t.stopPropagation(),$(this).addClass("active").siblings().removeClass("active");var n=$(this).data("id");e.showBaseLayer(n)})}})});