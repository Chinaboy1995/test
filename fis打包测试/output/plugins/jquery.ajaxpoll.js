define("plugins/ajaxpoll",["jquery"],function(){!function(o){"use strict";var l,t,n,e,a=function(i){function r(){var o=!1;return"MonitorStatisc"===i.currentFunc&&Project_ParamConfig.monitorStatiscConfig.isClose&&(o=!0),"AbnormalAlarm"===i.currentFunc&&Project_ParamConfig.abnormalAlarmConfig.isClose&&(o=!0),o}function u(o){var l=r()?u:a;t&&clearTimeout(t),t=setTimeout(function(){l(o)},1e3)}function p(o){return Math.round(500*Math.random()*Math.pow(2,o))}function c(o,l){var i=r()?u:a;return t&&clearTimeout(t),e>o.pollMaxFailedAttempts?void console.error("Polling terminated due to exceeding max failed attempts..."):void(-1!==o.pollLoops&&(n+=1,n>=o.pollLoops)||l&&(t=setTimeout(function(){i(o)},l)))}var f=o.ajax;i.pollDelay=i.pollDelay||6e4,i.pollLoops=i.pollLoops||-1,i.pollMaxFailedAttempts=i.pollMaxFailedAttempts||10,n=n||0,e=e||0,l=f(i),"function"==typeof i.pollDone&&l.done(i.pollDone),"function"==typeof i.pollFail&&l.fail(i.pollFail),l.done(function(){e=0,c(i,i.pollDelay)}),l.fail(function(){e++,c(i,p(e))})};o.extend({poll:a})}(jQuery)});