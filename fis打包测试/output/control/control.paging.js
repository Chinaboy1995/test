define("control/paging",["leaflet","core/namespace","core/baseobject"],function(t){t.ICT.Control.Paging=t.ICT.BaseObject.extend({id:"L.ICT.Control.Paging",options:{total:0,count:5,present:1,pageChange:null},initialize:function(n){t.setOptions(this,n)},addTo:function(t){this._initUi(),this._parentContainer=t,this._parentContainer.appendChild(this._container)},getBody:function(){return this._initUi(),this._container},remove:function(){null!=this._parentContainer&&this._container.remove()},setTotal:function(t){this.options.total=t,null!=this._container&&this._changePresentElement(this.options.present)},setCount:function(t){this.options.count=t,null!=this._container&&this._changePresentElement(this.options.present)},setPresent:function(t){this.options.present=t,null!=this._container&&this._changePresentElement(this.options.present)},getTotal:function(){return this.options.total},getCount:function(){return this.options.count},getPresent:function(){return this.options.present},_initUi:function(){this._container=$('<p class="paging container"></p>')[0];this.options.present>this.options.total&&(this.options.present=this.options.total),this.options.present<1&&(this.options.present=1),this._repaintUi(this.options.present)},_repaintUi:function(n){var i="",e=Math.ceil(parseFloat(n)/parseFloat(this.options.count));this._presentGroup=e;var s=(e-1)*this.options.count+1,o=e*this.options.count;o>this.options.total&&(o=this.options.total),1>s&&(s=1),i='<span class="paging button icon-previous-page"></span>';for(var a=s;o>=a;a++)i=a==n?i+'<span class="paging number present">'+a+"</span>":i+'<span class="paging number">'+a+"</span>";i+='<span class="paging button icon-next-page"></span>',$(this._container).html(i);var p=$(this._container).find(".number"),r=$(this._container).find(".icon-previous-page")[0],h=$(this._container).find(".icon-next-page")[0];if(t.DomEvent.on(h,"click",this._nextClick,this),t.DomEvent.on(r,"click",this._previousClick,this),null!=p&&p.length>0)for(var c=0;c<p.length;c++)t.DomEvent.on(p[c],"click",this._numClick,this)},_changePresentElement:function(t){Math.ceil(parseFloat(t)/parseFloat(this.options.count));this._repaintUi(t);for(var n=$(this._container).find(".paging.number"),i=0;i<n.length;i++){var e=n[i];e.innerHTML==this.options.present?$(e).hasClass(".present")||$(e).addClass("present"):$(e).removeClass("present")}},_callPageChange:function(){null!=this.options.pageChange&&this.options.pageChange(this.options.present)},_numClick:function(t){var n=parseInt(t.target.innerHTML);this.options.present!=n&&(this.options.present=n,this._changePresentElement(this.options.present),this._callPageChange()),t.stopPropagation()},_nextClick:function(t){this.options.present<this.options.total&&(this.options.present=this.options.present+1,this._changePresentElement(this.options.present),this._callPageChange()),t.stopPropagation()},_previousClick:function(t){this.options.present>1&&(this.options.present=this.options.present-1,this._changePresentElement(this.options.present),this._callPageChange()),t.stopPropagation()}})});