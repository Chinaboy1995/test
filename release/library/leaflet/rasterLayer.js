define("leaflet/rasterLayer",["leaflet"],function(e){e.GridLayer.RasterLayer=e.GridLayer.extend({initialize:function(t){e.GridLayer.prototype.initialize.call(this,t)},createTile:function(e){var t=document.createElement("div");console.time("getPointsInRaster");var n=this.getPointsInRaster(e);console.timeEnd("getPointsInRaster");if(!n.length)t.style.opacity=0;else{console.time("calculateSumValue");var r=this.calculateSumValue(n);console.timeEnd("calculateSumValue"),t.innerHTML=r,t.style.textAlign="center",t.style.lineHeight=this.options.tileSize+"px",t.style.color="#000",t.style.backgroundColor=this.getBgColor(r),t.style.fontSize="16px",t.style.fontWeight="bold"}return t},getBgColor:function(e){if(e<=10)return"#91E201";if(e>10&&e<=50)return"#009E01";if(e>50&&e<=100)return"#FFFF01";if(e>100&&e<=500)return"#FCCF00";if(e>500&&e<=1e3)return"#FD910B";if(e>1e3&&e<=5e3)return"#FA5E11";if(e>5e3)return"#F11415"},calculateMeanValue:function(e){var t=e.length,n=0;for(var r=0;r<t;r++)n+=e[r].v;return parseInt(n/t)},calculateSumValue:function(e){var t=e.length,n=0;for(var r=0;r<t;r++)n+=e[r].v;return parseInt(n)},calculateMaxValue:function(e){var t=e.length,n=0;for(var r=0;r<t;r++){var i=e[r].v;i>n&&(n=i)}return n},calculateMinValue:function(e){var t=e.length,n=0;for(var r=0;r<t;r++){var i=e[r].v;i<n&&(n=i)}return n},getCoorBylatlng:function(e){var t={},n=this._map.project(e,this._tileZoom);return t.x=parseInt(n.x/this.options.tileSize),t.y=parseInt(n.y/this.options.tileSize),t.z=this._map.getZoom(),t},getPointsInRaster:function(t){var n=[],r=this.options.data;for(var i=0,s=r.length;i<s;i++){var o=r[i],u=e.latLng(o.lat,o.lon),a=this.getCoorBylatlng(u);a.x===t.x&&a.y===t.y&&n.push(o)}return n}}),e.gridLayer.rasterLayer=function(t){return new e.GridLayer.RasterLayer(t)}});