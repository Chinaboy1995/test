require(["css!../library/bootstrap/css/bootstrap","css!../themes/css/func.user","jquery","plugins/jqueryi18n"],function(){var e=window.localStorage.getItem("language")||"zh",t=$(".username"),n=$(".email"),r=$(".login_error"),i=/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9})$/;t.focus(),e==="zh"?"":e,$.i18n.properties({name:"strings",path:"../languages/",mode:"both",language:e,cache:!1,checkAvailableLanguages:!0,async:!0,callback:function(){$(".forgetpsw_title").html($.i18n.prop("forgetpsw_title")),$(".forgetpsw_title_reminder").html($.i18n.prop("forgetpsw_title_reminder")),$(".forgetpsw_username_placeholder").attr("placeholder",$.i18n.prop("forgetpsw_username_placeholder")),$(".forgetpsw_email_placeholder").attr("placeholder",$.i18n.prop("forgetpsw_email_placeholder")),$(".forgetpsw_okbtn").html($.i18n.prop("forgetpsw_okbtn"))}}),$("body").on("keydown",function(e){var e=e||window.event;e.keyCode===13&&$(".login_btn_div").click()}),$(".login_btn_div").on("click",function(){var e=t.val();e=$.trim(e);var s=n.val();s=$.trim(s),r.text("");if(e==="")$(".error_username").text($.i18n.prop("forgetpsw_username_error")),t.focus();else if(s==="")$(".error_email").text($.i18n.prop("forgetpsw_email_error1")),n.focus();else if(!i.test(s))$(".error_email").text($.i18n.prop("forgetpsw_email_error2"));else{var o=Project_ParamConfig.userConfig.forgetpswUrl,u={userName:e,emailAddress:s};$.ajax({url:o,data:u,method:"POST",dataType:"JSON",success:function(e){e.state!==1?$(".error_email").text($.i18n.prop("forgetpsw_res_error")):$(".msg").text($.i18n.prop("forgetpsw_res_success"))},error:function(e){$(".error_email").text($.i18n.prop("forgetpsw_res_error"))}})}})});