require(["css!../library/bootstrap/css/bootstrap","css!../themes/css/func.user","jquery","plugins/jqueryi18n"],function(){var e=window.localStorage.getItem("language")||"zh",t=$(".login_error"),n=$(".username_error"),r=$(".psw_error"),i=$(".username"),s=$(".psw"),o=$(".login_btn_div");e==="zh"?"":e,$.i18n.properties({name:"strings",path:"../languages/",mode:"both",language:e,cache:!1,checkAvailableLanguages:!0,async:!0,callback:function(){$(".userlogin_title").html($.i18n.prop("userlogin_title")),$(".userlogin_title_welcom").html($.i18n.prop("userlogin_title_welcom")),$(".userlogin_username_placeholder").attr("placeholder",$.i18n.prop("userlogin_username_placeholder")),$(".userlogin_psw_placeholder").attr("placeholder",$.i18n.prop("userlogin_psw_placeholder")),$(".userlogin_forgetpsw").html($.i18n.prop("userlogin_forgetpsw")),$(".userlogin_login_button").html($.i18n.prop("userlogin_login_button")),$(".userlogin_enroll_a").html($.i18n.prop("userlogin_enroll_a"))}}),i.focus(),$("body").on("keydown",function(e){var e=e||window.event;e.keyCode===13&&o.click()}),$(".login_btn_div").on("click",function(){var e=$.trim(i.val()),o=$.trim(s.val());t.text("");if(e===""){n.text($.i18n.prop("userlogin_username_error")),i.focus();return}if(o===""){r.text($.i18n.prop("userlogin_psw_error")),s.focus();return}var u=Project_ParamConfig.userConfig.loginUrl,a={userName:e,passWord:o};$.ajax({url:u,data:a,method:"POST",dataType:"JSON",success:function(e){if(e.state===10020||e.state===10021)r.text($.i18n.prop("userloing_result_error_1"));else if(e.state===10022)r.text($.i18n.prop("userloing_result_error_2"));else if(e.state===1){var t={};t.userName=e.msg.userName,t.userId=e.msg.id,t.ifActive=e.msg.ifActive,t.emailAddress=e.msg.emailAddress,t=JSON.stringify(t),window.sessionStorage.setItem("userInfo",t),window.location.href="../index.html"}else r.text($.i18n.prop("userloing_result_error_3"))},error:function(e){r.text($.i18n.prop("userloing_result_error_3"))}})})});