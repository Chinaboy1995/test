define("control/paging",["leaflet","core/namespace","core/baseobject"],function(e){e.ICT.Control.Paging=e.ICT.BaseObject.extend({id:"L.ICT.Control.Paging",options:{total:0,count:5,present:1,pageChange:null},initialize:function(t){e.setOptions(this,t)},addTo:function(e){this._initUi(),this._parentContainer=e,this._parentContainer.appendChild(this._container)},getBody:function(){return this._initUi(),this._container},remove:function(){this._parentContainer!=null&&this._container.remove()},setTotal:function(e){this.options.total=e,this._container!=null&&this._changePresentElement(this.options.present)},setCount:function(e){this.options.count=e,this._container!=null&&this._changePresentElement(this.options.present)},setPresent:function(e){this.options.present=e,this._container!=null&&this._changePresentElement(this.options.present)},getTotal:function(){return this.options.total},getCount:function(){return this.options.count},getPresent:function(){return this.options.present},_initUi:function(){var e=this._container=$('<p class="paging container"></p>')[0];this.options.present>this.options.total&&(this.options.present=this.options.total),this.options.present<1&&(this.options.present=1),this._repaintUi(this.options.present)},_repaintUi:function(t){var n="",r=Math.ceil(parseFloat(t)/parseFloat(this.options.count));this._presentGroup=r;var i=(r-1)*this.options.count+1,s=r*this.options.count;s>this.options.total&&(s=this.options.total),i<1&&(i=1),n='<span class="paging button icon-previous-page"></span>';for(var o=i;o<=s;o++)o==t?n=n+'<span class="paging number present">'+o+"</span>":n=n+'<span class="paging number">'+o+"</span>";n+='<span class="paging button icon-next-page"></span>',$(this._container).html(n);var u=$(this._container).find(".number"),a=$(this._container).find(".icon-previous-page")[0],f=$(this._container).find(".icon-next-page")[0];e.DomEvent.on(f,"click",this._nextClick,this),e.DomEvent.on(a,"click",this._previousClick,this);if(u!=null&&u.length>0)for(var l=0;l<u.length;l++)e.DomEvent.on(u[l],"click",this._numClick,this)},_changePresentElement:function(e){var t=Math.ceil(parseFloat(e)/parseFloat(this.options.count));this._repaintUi(e);var n=$(this._container).find(".paging.number");for(var r=0;r<n.length;r++){var i=n[r];i.innerHTML==this.options.present?$(i).hasClass(".present")||$(i).addClass("present"):$(i).removeClass("present")}},_callPageChange:function(){this.options.pageChange!=null&&this.options.pageChange(this.options.present)},_numClick:function(e){var t=parseInt(e.target.innerHTML);this.options.present!=t&&(this.options.present=t,this._changePresentElement(this.options.present),this._callPageChange()),e.stopPropagation()},_nextClick:function(e){this.options.present<this.options.total&&(this.options.present=this.options.present+1,this._changePresentElement(this.options.present),this._callPageChange()),e.stopPropagation()},_previousClick:function(e){this.options.present>1&&(this.options.present=this.options.present-1,this._changePresentElement(this.options.present),this._callPageChange()),e.stopPropagation()}})});