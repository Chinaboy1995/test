/*!
 * jQuery contextMenu v2.4.3-dev - Plugin for simple contextMenu handling
 *
 * Version: v2.4.3-dev
 *
 * Authors: BjÃ¶rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://swisnl.github.io/jQuery-contextMenu/
 *
 * Copyright (c) 2011-2017 SWIS BV and contributors
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 * Date: 2017-01-21T11:53:09.617Z
 */

(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)})(function(e){function t(e){var t=e.split(/\s+/),n=[];for(var r=0,i;i=t[r];r++)i=i.charAt(0).toUpperCase(),n.push(i);return n}function n(t){return t.id&&e('label[for="'+t.id+'"]').val()||t.name}function r(t,i,s){return s||(s=0),i.each(function(){var i=e(this),o=this,u=this.nodeName.toLowerCase(),a,f;u==="label"&&i.find("input, textarea, select").length&&(a=i.text(),i=i.children().first(),o=i.get(0),u=o.nodeName.toLowerCase());switch(u){case"menu":f={name:i.attr("label"),items:{}},s=r(f.items,i.children(),s);break;case"a":case"button":f={name:i.text(),disabled:!!i.attr("disabled"),callback:function(){return function(){i.click()}}()};break;case"menuitem":case"command":switch(i.attr("type")){case undefined:case"command":case"menuitem":f={name:i.attr("label"),disabled:!!i.attr("disabled"),icon:i.attr("icon"),callback:function(){return function(){i.click()}}()};break;case"checkbox":f={type:"checkbox",disabled:!!i.attr("disabled"),name:i.attr("label"),selected:!!i.attr("checked")};break;case"radio":f={type:"radio",disabled:!!i.attr("disabled"),name:i.attr("label"),radio:i.attr("radiogroup"),value:i.attr("id"),selected:!!i.attr("checked")};break;default:f=undefined}break;case"hr":f="-------";break;case"input":switch(i.attr("type")){case"text":f={type:"text",name:a||n(o),disabled:!!i.attr("disabled"),value:i.val()};break;case"checkbox":f={type:"checkbox",name:a||n(o),disabled:!!i.attr("disabled"),selected:!!i.attr("checked")};break;case"radio":f={type:"radio",name:a||n(o),disabled:!!i.attr("disabled"),radio:!!i.attr("name"),value:i.val(),selected:!!i.attr("checked")};break;default:f=undefined}break;case"select":f={type:"select",name:a||n(o),disabled:!!i.attr("disabled"),selected:i.val(),options:{}},i.children().each(function(){f.options[this.value]=e(this).text()});break;case"textarea":f={type:"textarea",name:a||n(o),disabled:!!i.attr("disabled"),value:i.val()};break;case"label":break;default:f={type:"html",html:i.clone(!0)}}f&&(s++,t["key"+s]=f)}),s}e.support.htmlMenuitem="HTMLMenuItemElement"in window,e.support.htmlCommand="HTMLCommandElement"in window,e.support.eventSelectstart="onselectstart"in document.documentElement;if(!e.ui||!e.widget)e.cleanData=function(t){return function(n){var r,i,s;for(s=0;n[s]!=null;s++){i=n[s];try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}}t(n)}}(e.cleanData);var i=null,s=!1,o=e(window),u=0,a={},f={},l={},c={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var n=this.offset();n.top+=this.outerHeight(),n.left+=this.outerWidth()/2-t.outerWidth()/2,t.css(n)}},position:function(e,t,n){var r;if(!t&&!n){e.determinePosition.call(this,e.$menu);return}t==="maintain"&&n==="maintain"?r=e.$menu.position():r={top:n,left:t};var i=o.scrollTop()+o.height(),s=o.scrollLeft()+o.width(),u=e.$menu.outerHeight(),a=e.$menu.outerWidth();r.top+u>i&&(r.top-=u),r.top<0&&(r.top=0),r.left+a>s&&(r.left-=a),r.left<0&&(r.left=0),e.$menu.css(r)},positionSubmenu:function(t){if(t===undefined)return;if(e.ui&&e.ui.position)t.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};t.css(n)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},h={timer:null,pageX:null,pageY:null},p=function(e){var t=0,n=e;for(;;){t=Math.max(t,parseInt(n.css("z-index"),10)||0),n=n.parent();if(!n||!n.length||"html body".indexOf(n.prop("nodeName").toLowerCase())>-1)break}return t},d={abortevent:function(e){e.preventDefault(),e.stopImmediatePropagation()},contextmenu:function(t){var n=e(this);t.data.trigger==="right"&&(t.preventDefault(),t.stopImmediatePropagation());if(t.data.trigger!=="right"&&t.data.trigger!=="demand"&&t.originalEvent)return;if(!(t.mouseButton===undefined||!t.data||t.data.trigger==="left"&&t.mouseButton===0||t.data.trigger==="right"&&t.mouseButton===2))return;if(n.hasClass("context-menu-active"))return;if(!n.hasClass("context-menu-disabled")){i=n;if(t.data.build){var r=t.data.build(i,t);if(r===!1)return;t.data=e.extend(!0,{},c,t.data,r||{});if(!t.data.items||e.isEmptyObject(t.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");t.data.$trigger=i,v.create(t.data)}var s=!1;for(var o in t.data.items)if(t.data.items.hasOwnProperty(o)){var u;e.isFunction(t.data.items[o].visible)?u=t.data.items[o].visible.call(e(t.currentTarget),o,t.data):typeof t.data.items[o]!="undefined"&&t.data.items[o].visible?u=t.data.items[o].visible===!0:u=!0,u&&(s=!0)}s&&v.show.call(n,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var n=e(this);i&&i.length&&!i.is(n)&&i.data("contextMenu").$menu.trigger("contextmenu:hide"),t.button===2&&(i=n.data("contextMenuActive",!0))},mouseup:function(t){var n=e(this);n.data("contextMenuActive")&&i&&i.length&&i.is(n)&&!n.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),i=n,n.trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))),n.removeData("contextMenuActive")},mouseenter:function(t){var n=e(this),r=e(t.relatedTarget),s=e(document);if(r.is(".context-menu-list")||r.closest(".context-menu-list").length)return;if(i&&i.length)return;h.pageX=t.pageX,h.pageY=t.pageY,h.data=t.data,s.on("mousemove.contextMenuShow",d.mousemove),h.timer=setTimeout(function(){h.timer=null,s.off("mousemove.contextMenuShow"),i=n,n.trigger(e.Event("contextmenu",{data:h.data,pageX:h.pageX,pageY:h.pageY}))},t.data.delay)},mousemove:function(e){h.pageX=e.pageX,h.pageY=e.pageY},mouseleave:function(t){var n=e(t.relatedTarget);if(n.is(".context-menu-list")||n.closest(".context-menu-list").length)return;try{clearTimeout(h.timer)}catch(t){}h.timer=null},layerClick:function(t){var n=e(this),r=n.data("contextMenuRoot"),i=t.button,s=t.pageX,u=t.pageY,a,f;t.preventDefault(),t.stopImmediatePropagation(),setTimeout(function(){var n,l=r.trigger==="left"&&i===0||r.trigger==="right"&&i===2;if(document.elementFromPoint&&r.$layer){r.$layer.hide(),a=document.elementFromPoint(s-o.scrollLeft(),u-o.scrollTop());if(a.isContentEditable){var c=document.createRange(),h=window.getSelection();c.selectNode(a),c.collapse(!0),h.removeAllRanges(),h.addRange(c)}r.$layer.show()}if(r.reposition&&l)if(document.elementFromPoint){if(r.$trigger.is(a)||r.$trigger.has(a).length){r.position.call(r.$trigger,r,s,u);return}}else{f=r.$trigger.offset(),n=e(window),f.top+=n.scrollTop();if(f.top<=t.pageY){f.left+=n.scrollLeft();if(f.left<=t.pageX){f.bottom=f.top+r.$trigger.outerHeight();if(f.bottom>=t.pageY){f.right=f.left+r.$trigger.outerWidth();if(f.right>=t.pageX){r.position.call(r.$trigger,r,s,u);return}}}}}a&&l&&r.$trigger.one("contextmenu:hidden",function(){e(a).contextMenu({x:s,y:u,button:i})}),r!=null&&r.$menu!=null&&r.$menu.trigger("contextmenu:hide")},50)},keyStop:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()},key:function(e){var t={};i&&(t=i.data("contextMenu")||{}),t.zIndex===undefined&&(t.zIndex=0);var n=0,r=function(e){e.style.zIndex!==""?n=e.style.zIndex:e.offsetParent!==null&&e.offsetParent!==undefined?r(e.offsetParent):e.parentElement!==null&&e.parentElement!==undefined&&r(e.parentElement)};r(e.target);if(n>t.zIndex)return;switch(e.keyCode){case 9:case 38:d.keyStop(e,t);if(t.isInput){if(e.keyCode===9&&e.shiftKey){e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),t.$menu!=null&&t.$menu.trigger("prevcommand");return}if(e.keyCode===38&&t.$selected.find("input, textarea, select").prop("type")==="checkbox"){e.preventDefault();return}}else if(e.keyCode!==9||e.shiftKey){t.$menu!=null&&t.$menu.trigger("prevcommand");return}break;case 40:d.keyStop(e,t);if(!t.isInput){t.$menu!=null&&t.$menu.trigger("nextcommand");return}if(e.keyCode===9){e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),t.$menu!=null&&t.$menu.trigger("nextcommand");return}if(e.keyCode===40&&t.$selected.find("input, textarea, select").prop("type")==="checkbox"){e.preventDefault();return}break;case 37:d.keyStop(e,t);if(t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var s=t.$selected.parent().parent();t.$selected.trigger("contextmenu:blur"),t.$selected=s;return}break;case 39:d.keyStop(e,t);if(t.isInput||!t.$selected||!t.$selected.length)break;var o=t.$selected.data("contextMenu")||{};if(o.$menu&&t.$selected.hasClass("context-menu-submenu")){t.$selected=null,o.$selected=null,o.$menu.trigger("nextcommand");return}break;case 35:case 36:if(t.$selected&&t.$selected.find("input, textarea, select").length)return;(t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[e.keyCode===36?"first":"last"]().trigger("contextmenu:focus"),e.preventDefault();return;case 13:d.keyStop(e,t);if(t.isInput){if(t.$selected&&!t.$selected.is("textarea, select")){e.preventDefault();return}break}typeof t.$selected!="undefined"&&t.$selected!==null&&t.$selected.trigger("mouseup");return;case 32:case 33:case 34:d.keyStop(e,t);return;case 27:d.keyStop(e,t),t.$menu!=null&&t.$menu.trigger("contextmenu:hide");return;default:var u=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[u]){t.accesskeys[u].$node.trigger(t.accesskeys[u].$menu?"contextmenu:focus":"mouseup");return}}e.stopPropagation(),typeof t.$selected!="undefined"&&t.$selected!==null&&t.$selected.trigger(e)},prevItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},r=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}var s=n.$menu.children(),o=!n.$selected||!n.$selected.prev().length?s.last():n.$selected.prev(),u=o;while(o.hasClass(r.classNames.disabled)||o.hasClass(r.classNames.notSelectable)||o.is(":hidden")){o.prev().length?o=o.prev():o=s.last();if(o.is(u))return}n.$selected&&d.itemMouseleave.call(n.$selected.get(0),t),d.itemMouseenter.call(o.get(0),t);var a=o.find("input, textarea, select");a.length&&a.focus()},nextItem:function(t){t.stopPropagation();var n=e(this).data("contextMenu")||{},r=e(this).data("contextMenuRoot")||{};if(n.$selected){var i=n.$selected;n=n.$selected.parent().data("contextMenu")||{},n.$selected=i}var s=n.$menu.children(),o=!n.$selected||!n.$selected.next().length?s.first():n.$selected.next(),u=o;while(o.hasClass(r.classNames.disabled)||o.hasClass(r.classNames.notSelectable)||o.is(":hidden")){o.next().length?o=o.next():o=s.first();if(o.is(u))return}n.$selected&&d.itemMouseleave.call(n.$selected.get(0),t),d.itemMouseenter.call(o.get(0),t);var a=o.find("input, textarea, select");a.length&&a.focus()},focusInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),r=n.contextMenu,i=n.contextMenuRoot;i.$selected=r.$selected=t,i.isInput=r.isInput=!0},blurInput:function(){var t=e(this).closest(".context-menu-item"),n=t.data(),r=n.contextMenu,i=n.contextMenuRoot;i.isInput=r.isInput=!1},menuMouseenter:function(){var t=e(this).data().contextMenuRoot;t.hovering=!0},menuMouseleave:function(t){var n=e(this).data().contextMenuRoot;n.$layer&&n.$layer.is(t.relatedTarget)&&(n.hovering=!1)},itemMouseenter:function(t){var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;s.hovering=!0,t&&s.$layer&&s.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(i.$menu?i:s).$menu.children("."+s.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur");if(n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable)){i.$selected=null;return}n.trigger("contextmenu:focus")},itemMouseleave:function(t){var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;if(s!==i&&s.$layer&&s.$layer.is(t.relatedTarget)){typeof s.$selected!="undefined"&&s.$selected!==null&&s.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),s.$selected=i.$selected=i.$node;return}n.trigger("contextmenu:blur")},itemClick:function(t){var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot,o=r.contextMenuKey,u;if(!i.items[o]||n.is("."+s.classNames.disabled+", .context-menu-separator, ."+s.classNames.notSelectable)||n.is(".context-menu-submenu")&&s.selectableSubMenu===!1)return;t.preventDefault(),t.stopImmediatePropagation();if(e.isFunction(i.callbacks[o])&&Object.prototype.hasOwnProperty.call(i.callbacks,o))u=i.callbacks[o];else{if(!e.isFunction(s.callback))return;u=s.callback}u.call(s.$trigger,o,s)!==!1?s.$menu.trigger("contextmenu:hide"):s.$menu.parent().length&&v.update.call(s.$trigger,s)},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(t,n){var r=e(this).data("contextMenuRoot");v.hide.call(r.$trigger,r,n&&n.force)},focusItem:function(t){t.stopPropagation();var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;if(n.hasClass(s.classNames.disabled)||n.hasClass(s.classNames.notSelectable))return;n.addClass([s.classNames.hover,s.classNames.visible].join(" ")).parent().find(".context-menu-item").not(n).removeClass(s.classNames.visible).filter("."+s.classNames.hover).trigger("contextmenu:blur"),i.$selected=s.$selected=n,i.$node&&s.positionSubmenu.call(i.$node,i.$menu)},blurItem:function(t){t.stopPropagation();var n=e(this),r=n.data(),i=r.contextMenu,s=r.contextMenuRoot;i.autoHide&&n.removeClass(s.classNames.visible),n.removeClass(s.classNames.hover),i.$selected=null}},v={show:function(t,n,r){var s=e(this),o={};e("#context-menu-layer").trigger("mousedown"),t.$trigger=s;if(t.events.show.call(s,t)===!1){i=null;return}v.update.call(s,t),t.position.call(s,t,n,r);if(t.zIndex){var u=t.zIndex;typeof t.zIndex=="function"&&(u=t.zIndex.call(s,t)),o.zIndex=p(s)+u}v.layer.call(t.$menu,t,o.zIndex),t.$menu.find("ul").css("zIndex",o.zIndex+1),t.$menu.css(o)[t.animation.show](t.animation.duration,function(){s.trigger("contextmenu:visible")}),s.data("contextMenu",t).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",d.key),t.autoHide&&e(document).on("mousemove.contextMenuAutoHide",function(e){var n=s.offset();n.right=n.left+s.outerWidth(),n.bottom=n.top+s.outerHeight(),t.$layer&&!t.hovering&&(!(e.pageX>=n.left&&e.pageX<=n.right)||!(e.pageY>=n.top&&e.pageY<=n.bottom))&&setTimeout(function(){!t.hovering&&t.$menu!=null&&t.$menu.trigger("contextmenu:hide")},50)})},hide:function(t,n){var r=e(this);t||(t=r.data("contextMenu")||{});if(!n&&t.events&&t.events.hide.call(r,t)===!1)return;r.removeData("contextMenu").removeClass("context-menu-active");if(t.$layer){setTimeout(function(e){return function(){e.remove()}}(t.$layer),10);try{delete t.$layer}catch(s){t.$layer=null}}i=null,t.$menu.find("."+t.classNames.hover).trigger("contextmenu:blur"),t.$selected=null,t.$menu.find("."+t.classNames.visible).removeClass(t.classNames.visible),e(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),t.$menu&&t.$menu[t.animation.hide](t.animation.duration,function(){t.build&&(t.$menu.remove(),e.each(t,function(e){switch(e){case"ns":case"selector":case"build":case"trigger":return!0;default:t[e]=undefined;try{delete t[e]}catch(n){}return!0}})),setTimeout(function(){r.trigger("contextmenu:hidden")},10)})},create:function(n,r){function i(t){var n=e("<span></span>");if(t._accesskey)t._beforeAccesskey&&n.append(document.createTextNode(t._beforeAccesskey)),e("<span></span>").addClass("context-menu-accesskey").text(t._accesskey).appendTo(n),t._afterAccesskey&&n.append(document.createTextNode(t._afterAccesskey));else if(t.isHtmlName){if(typeof t.accesskey!="undefined")throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");n.html(t.name)}else n.text(t.name);return n}r===undefined&&(r=n),n.$menu=e('<ul class="context-menu-list"></ul>').addClass(n.className||"").data({contextMenu:n,contextMenuRoot:r}),e.each(["callbacks","commands","inputs"],function(e,t){n[t]={},r[t]||(r[t]={})}),r.accesskeys||(r.accesskeys={}),e.each(n.items,function(s,o){var u=e('<li class="context-menu-item"></li>').addClass(o.className||""),a=null,f=null;u.on("click",e.noop);if(typeof o=="string"||o.type==="cm_separator")o={type:"cm_seperator"};o.$node=u.data({contextMenu:n,contextMenuRoot:r,contextMenuKey:s});if(typeof o.accesskey!="undefined"){var c=t(o.accesskey);for(var h=0,p;p=c[h];h++)if(!r.accesskeys[p]){r.accesskeys[p]=o;var m=o.name.match(new RegExp("^(.*?)("+p+")(.*)$","i"));m&&(o._beforeAccesskey=m[1],o._accesskey=m[2],o._afterAccesskey=m[3]);break}}if(o.type&&l[o.type])l[o.type].call(u,o,n,r),e.each([n,r],function(t,r){r.commands[s]=o,e.isFunction(o.callback)&&(r.callbacks[s]===undefined||n.type===undefined)&&(r.callbacks[s]=o.callback)});else{o.type==="cm_seperator"?u.addClass("context-menu-separator "+r.classNames.notSelectable):o.type==="html"?u.addClass("context-menu-html "+r.classNames.notSelectable):o.type!=="sub"&&(o.type?(a=e("<label></label>").appendTo(u),i(o).appendTo(a),u.addClass("context-menu-input"),n.hasTypes=!0,e.each([n,r],function(e,t){t.commands[s]=o,t.inputs[s]=o})):o.items&&(o.type="sub"));switch(o.type){case"cm_seperator":break;case"text":f=e('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+s).val(o.value||"").appendTo(a);break;case"textarea":f=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+s).val(o.value||"").appendTo(a),o.height&&f.height(o.height);break;case"checkbox":f=e('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+s).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"radio":f=e('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+o.radio).val(o.value||"").prop("checked",!!o.selected).prependTo(a);break;case"select":f=e('<select name=""></select>').attr("name","context-menu-input-"+s).appendTo(a),o.options&&(e.each(o.options,function(t,n){e("<option></option>").val(t).text(n).appendTo(f)}),f.val(o.selected));break;case"sub":i(o).appendTo(u),o.appendTo=o.$node,u.data("contextMenu",o).addClass("context-menu-submenu"),o.callback=null,"function"==typeof o.items.then?v.processPromises(o,r,o.items):v.create(o,r);break;case"html":e(o.html).appendTo(u);break;default:e.each([n,r],function(t,r){r.commands[s]=o,e.isFunction(o.callback)&&(r.callbacks[s]===undefined||n.type===undefined)&&(r.callbacks[s]=o.callback)}),i(o).appendTo(u)}o.type&&o.type!=="sub"&&o.type!=="html"&&o.type!=="cm_seperator"&&(f.on("focus",d.focusInput).on("blur",d.blurInput),o.events&&f.on(o.events,n)),o.icon&&(e.isFunction(o.icon)?o._icon=o.icon.call(this,this,u,s,o):typeof o.icon=="string"&&o.icon.substring(0,3)==="fa-"?o._icon=r.classNames.icon+" "+r.classNames.icon+"--fa fa "+o.icon:o._icon=r.classNames.icon+" "+r.classNames.icon+"-"+o.icon,u.addClass(o._icon))}o.$input=f,o.$label=a,u.appendTo(n.$menu),!n.hasTypes&&e.support.eventSelectstart&&u.on("selectstart.disableTextSelect",d.abortevent)}),n.$node||n.$menu.css("display","none").addClass("context-menu-root"),n.$menu.appendTo(n.appendTo||document.body)},resize:function(t,n){var r;t.css({position:"absolute",display:"block"}),t.data("width",(r=t.get(0)).getBoundingClientRect?Math.ceil(r.getBoundingClientRect().width):t.outerWidth()+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(){v.resize(e(this),!0)}),n||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return e(this).data("width")})},update:function(t,n){var r=this;n===undefined&&(n=t,v.resize(t.$menu)),t.$menu.children().each(function(){var i=e(this),s=i.data("contextMenuKey"),o=t.items[s],u=e.isFunction(o.disabled)&&o.disabled.call(r,s,n)||o.disabled===!0,a;e.isFunction(o.visible)?a=o.visible.call(r,s,n):typeof o.visible!="undefined"?a=o.visible===!0:a=!0,i[a?"show":"hide"](),i[u?"addClass":"removeClass"](n.classNames.disabled),e.isFunction(o.icon)&&(i.removeClass(o._icon),o._icon=o.icon.call(this,r,i,s,o),i.addClass(o._icon));if(o.type){i.find("input, select, textarea").prop("disabled",u);switch(o.type){case"text":case"textarea":o.$input.val(o.value||"");break;case"checkbox":case"radio":o.$input.val(o.value||"").prop("checked",!!o.selected);break;case"select":o.$input.val(o.selected||"")}}o.$menu&&v.update.call(r,o,n)})},layer:function(t,n){var r=t.$layer=e('<div id="context-menu-layer"></div>').css({height:o.height(),width:o.width(),display:"block",position:"fixed","z-index":n,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",d.abortevent).on("mousedown",d.layerClick);return document.body.style.maxWidth===undefined&&r.css({position:"absolute",height:e(document).height()}),r},processPromises:function(e,t,n){function r(e,t,n){n===undefined&&i(undefined),s(e,t,n)}function i(e,t,n){n===undefined?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):typeof n=="string"&&(n={error:{name:n}}),s(e,t,n)}function s(e,t,n){if(t.$menu===undefined||!t.$menu.is(":visible"))return;e.$node.removeClass(t.classNames.iconLoadingClass),e.items=n,v.create(e,t,!0),v.update(e,t),t.positionSubmenu.call(e.$node,e.$menu)}e.$node.addClass(t.classNames.iconLoadingClass),n.then(r.bind(this,e,t),i.bind(this,e,t))}};e.fn.contextMenu=function(t){var n=this,r=t;if(this.length>0)if(t===undefined)this.first().trigger("contextmenu");else if(t.x!==undefined&&t.y!==undefined)this.first().trigger(e.Event("contextmenu",{pageX:t.x,pageY:t.y,mouseButton:t.button}));else if(t==="hide"){var i=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;i&&i.trigger("contextmenu:hide")}else t==="destroy"?e.contextMenu("destroy",{context:this}):e.isPlainObject(t)?(t.context=this,e.contextMenu("create",t)):t?this.removeClass("context-menu-disabled"):t||this.addClass("context-menu-disabled");else e.each(f,function(){this.selector===n.selector&&(r.data=this,e.extend(r.data,{trigger:"demand"}))}),d.contextmenu.call(r.target,r);return this},e.contextMenu=function(t,n){typeof t!="string"&&(n=t,t="create"),typeof n=="string"?n={selector:n}:n===undefined&&(n={});var r=e.extend(!0,{},c,n||{}),i=e(document),o=i,l=!1;!r.context||!r.context.length?r.context=document:(o=e(r.context).first(),r.context=o.get(0),l=!e(r.context).is(document));switch(t){case"create":if(!r.selector)throw new Error("No selector specified");if(r.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+r.selector+'" as it contains a reserved className');if(!r.build&&(!r.items||e.isEmptyObject(r.items)))throw new Error("No Items specified");u++,r.ns=".contextMenu"+u,l||(a[r.selector]=r.ns),f[r.ns]=r,r.trigger||(r.trigger="right");if(!s){var h=r.itemClickEvent==="click"?"click.contextMenu":"mouseup.contextMenu",p={"contextmenu:focus.contextMenu":d.focusItem,"contextmenu:blur.contextMenu":d.blurItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.itemMouseenter,"mouseleave.contextMenu":d.itemMouseleave};p[h]=d.itemClick,i.on({"contextmenu:hide.contextMenu":d.hideMenu,"prevcommand.contextMenu":d.prevItem,"nextcommand.contextMenu":d.nextItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.menuMouseenter,"mouseleave.contextMenu":d.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",d.inputClick).on(p,".context-menu-item"),s=!0}o.on("contextmenu"+r.ns,r.selector,r,d.contextmenu),l&&o.on("remove"+r.ns,function(){e(this).contextMenu("destroy")});switch(r.trigger){case"hover":o.on("mouseenter"+r.ns,r.selector,r,d.mouseenter).on("mouseleave"+r.ns,r.selector,r,d.mouseleave);break;case"left":o.on("click"+r.ns,r.selector,r,d.click)}r.build||v.create(r);break;case"destroy":var m;if(l){var g=r.context;e.each(f,function(t,n){if(!n)return!0;if(!e(g).is(n.selector))return!0;m=e(".context-menu-list").filter(":visible"),m.length&&m.data().contextMenuRoot.$trigger.is(e(n.context).find(n.selector))&&m.trigger("contextmenu:hide",{force:!0});try{f[n.ns].$menu&&f[n.ns].$menu.remove(),delete f[n.ns]}catch(r){f[n.ns]=null}return e(n.context).off(n.ns),!0})}else if(!r.selector)i.off(".contextMenu .contextMenuAutoHide"),e.each(f,function(t,n){e(n.context).off(n.ns)}),a={},f={},u=0,s=!1,e("#context-menu-layer, .context-menu-list").remove();else if(a[r.selector]){m=e(".context-menu-list").filter(":visible"),m.length&&m.data().contextMenuRoot.$trigger.is(r.selector)&&m.trigger("contextmenu:hide",{force:!0});try{f[a[r.selector]].$menu&&f[a[r.selector]].$menu.remove(),delete f[a[r.selector]]}catch(y){f[a[r.selector]]=null}i.off(a[r.selector])}break;case"html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||typeof n=="boolean"&&n)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+t+'"')}return this},e.contextMenu.setInputValues=function(t,n){n===undefined&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":t.value=n[e]||"";break;case"checkbox":t.selected=n[e]?!0:!1;break;case"radio":t.selected=(n[t.radio]||"")===t.value;break;case"select":t.selected=n[e]||""}})},e.contextMenu.getInputValues=function(t,n){return n===undefined&&(n={}),e.each(t.inputs,function(e,t){switch(t.type){case"text":case"textarea":case"select":n[e]=t.$input.val();break;case"checkbox":n[e]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(n[t.radio]=t.value)}}),n},e.contextMenu.fromMenu=function(t){var n=e(t),i={};return r(i,n.children()),i},e.contextMenu.defaults=c,e.contextMenu.types=l,e.contextMenu.handle=d,e.contextMenu.op=v,e.contextMenu.menus=f});