define("func/portquery",["leaflet","func/base","func/userLogin"],function(e){e.ICT.Func.add("PortQuery",{Class:e.Class.extend({initialize:function(){this.menu=e.ict.app.menu,this.menuid="ict_menu_main_gkcx"},start:function(){this.menu.mainmenu.deactiveMenuExceptOne(this.menuid),this.menu.submenu.has(this.menuid)||this.menu.submenu.add(this.menuid,this.getSubMenuHTML()),this.menu.submenu.show(this.menuid),this._initSubMenuEvts()},stop:function(){this.menu.submenu.destory(this.menuid),this.menu.mainmenu.deactiveMenu(this.menuid)},getSubMenuHTML:function(){var e=[];return e.push('<ul class="submenu_portquery">'),e.push('<li class="menu_item odfx"><img src="themes/images/frame/menu_tshf_zdqy.png">&nbsp<label class="port_query_odanalysis">OD分析</label></li>'),e.push('<li class="menu_item gxys"><img src="themes/images/frame/menu_tshf_zdmb.png">&nbsp<label class="port_query_gxys">关系演示</label></li>'),e.push("</ul>"),e.join("")},_initSubMenuEvts:function(){var t=this,n=this.menu.getContainer();n.find(".port_query_odanalysis").html($.i18n.prop("port_query_odanalysis")),n.find(".port_query_gxys").html($.i18n.prop("port_query_gxys")),n.find(".submenu_portquery .menu_item").on("click",function(n){n.stopPropagation();var r=$(this);if(r.hasClass("odfx")){if(!e.ICT.Func.UserLogin.getInstance().isLogin()){e.ICT.Func.UserLogin.getInstance().alertLoginDialog(),t.menu.mainmenu.deactiveMenu(t.menuid);return}window.open("resultpages/headod.html")}else if(r.hasClass("gxys")){if(!e.ICT.Func.UserLogin.getInstance().isLogin()){e.ICT.Func.UserLogin.getInstance().alertLoginDialog(),t.menu.mainmenu.deactiveMenu(t.menuid);return}window.open("resultpages/gxgl.html")}})}})})});