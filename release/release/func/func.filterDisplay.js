define("func/filterDisplay",["leaflet","func/base","func/userLogin"],function(e){e.ICT.Func.add("FilterDisplay",{Class:e.Class.extend({initialize:function(){this.menu=e.ict.app.menu,this.menuid="ict_menu_main_glxs",this.ictmap=e.ict.app.ictmap,this.shipTypeList=Project_ParamConfig.FilterDisplayConfig.shipTypeList,this.shipFlagList=Project_ParamConfig.FilterDisplayConfig.shipFlagList,this.shipStateList=Project_ParamConfig.FilterDisplayConfig.shipStateList,this.shipSourceList=Project_ParamConfig.FilterDisplayConfig.shipSourceList},start:function(){this.menu.mainmenu.deactiveMenuExceptOne(this.menuid);if(!e.ICT.Func.UserLogin.getInstance().isLogin()){e.ICT.Func.UserLogin.getInstance().alertLoginDialog(),this.menu.mainmenu.deactiveMenu(this.menuid);return}this.menu.submenu.has(this.menuid)||this.menu.submenu.add(this.menuid,this.getSubMenuHTML()),this.menu.submenu.show(this.menuid),this._initSubMenuEvts()},stop:function(){this.menu.submenu.hide(),this.menu.mainmenu.deactiveMenu(this.menuid)},getSubMenuHTML:function(){var e=[];e.push('<ul class="submenu_glxs">'),e.push('<li class="submenu_glxs_li">'),e.push('<img src="themes/images/frame/menu_glxs_cblx.png">&nbsp&nbsp<label class="func_filter_shiptype">按船舶类型</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),e.push('<ul class="filter_ul shipTypeList" style="display:none;">');for(var t=0,n=this.shipTypeList.length;t<n;t++)e.push("<li>"),e.push('<img src="themes/images/filterdisplay/shipTypeList_'+this.shipTypeList[t]+'.png">'),e.push("&nbsp;&nbsp"),e.push("<label>"+this.getNameByKey(this.shipTypeList[t],"shiptype")+"</label>"),e.push("&nbsp;&nbsp"),e.push('<input type="checkbox" value="'+this.shipTypeList[t]+'" checked>'),e.push("</li>");e.push("</ul>"),e.push("</li>"),e.push('<li class="submenu_glxs_li">'),e.push('<img src="themes/images/frame/menu_glxs_cq.png">&nbsp&nbsp<label class="func_filter_shipflag">按船旗</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),e.push('<ul class="filter_ul shipFlagList" style="display:none;">');for(var t=0,n=this.shipFlagList.length;t<n;t++)e.push("<li>"),e.push('<img src="themes/images/filterdisplay/country_'+this.shipFlagList[t]+'.png">'),e.push("&nbsp;&nbsp"),e.push("<label>"+this.getNameByKey(this.shipFlagList[t],"shipflag")+"</label>"),e.push("&nbsp;&nbsp"),e.push('<input type="checkbox" value="'+this.shipFlagList[t]+'" checked>'),e.push("</li>");e.push("</ul>"),e.push("</li>"),e.push('<li class="submenu_glxs_li">'),e.push('<img src="themes/images/frame/menu_glxs_hxzt.png">&nbsp&nbsp<label class="func_filter_shipsta">按航行状态</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),e.push('<ul class="filter_ul shipStateList" style="display:none;">');for(var t=0,n=this.shipStateList.length;t<n;t++)e.push("<li>"),e.push("<label>"+this.getNameByKey(this.shipStateList[t],"shipstate")+"</label>"),e.push("&nbsp;&nbsp"),e.push('<input type="checkbox" value="'+this.shipStateList[t]+'" checked>'),e.push("</li>");e.push("</ul>"),e.push("</li>"),e.push('<li class="submenu_glxs_li">'),e.push('<img src="themes/images/frame/menu_glxs_aly.png">&nbsp&nbsp<label class="func_filter_shipsrc">按来源</label>&nbsp&nbsp<img class="arrowImg" src="themes/images/frame/arrow_down.png">'),e.push('<ul class="filter_ul shipSourceList" style="display:none;">');for(var t=0,n=this.shipSourceList.length;t<n;t++)e.push("<li>"),e.push("<label>"+this.getNameByKey(this.shipSourceList[t],"shipsrc")+"</label>"),e.push("&nbsp;&nbsp"),e.push('<input type="checkbox" value="'+this.shipSourceList[t]+'" checked>'),e.push("</li>");return e.push("</ul>"),e.push("</li>"),e.push("</ul>"),e.join("")},getNameByKey:function(e,t){e=e.toString();var n=null;if(t==="shiptype")switch(e){case"1":n=$.i18n.prop("func_filter_shiptype_1");break;case"2":n=$.i18n.prop("func_filter_shiptype_2");break;case"3":n=$.i18n.prop("func_filter_shiptype_3");break;case"4":n=$.i18n.prop("func_filter_shiptype_4");break;case"5":n=$.i18n.prop("func_filter_shiptype_5");break;case"6":n=$.i18n.prop("func_filter_shiptype_6");break;case"7":n=$.i18n.prop("func_filter_shiptype_7");break;case"8":n=$.i18n.prop("func_filter_shiptype_8");break;case"100":n=$.i18n.prop("func_filter_shiptype_100")}else if(t==="shipflag")switch(e){case"1":n=$.i18n.prop("func_filter_shipflag_1");break;case"2":n=$.i18n.prop("func_filter_shipflag_2");break;case"3":n=$.i18n.prop("func_filter_shipflag_3");break;case"4":n=$.i18n.prop("func_filter_shipflag_4");break;case"5":n=$.i18n.prop("func_filter_shipflag_5");break;case"100":n=$.i18n.prop("func_filter_shipflag_100")}else if(t==="shipstate")switch(e){case"0":n=$.i18n.prop("func_filter_shipsta_0");break;case"1":n=$.i18n.prop("func_filter_shipsta_1");break;case"2":n=$.i18n.prop("func_filter_shipsta_2");break;case"3":n=$.i18n.prop("func_filter_shipsta_3");break;case"4":n=$.i18n.prop("func_filter_shipsta_4");break;case"5":n=$.i18n.prop("func_filter_shipsta_5");break;case"6":n=$.i18n.prop("func_filter_shipsta_6");break;case"7":n=$.i18n.prop("func_filter_shipsta_7");break;case"8":n=$.i18n.prop("func_filter_shipsta_8")}else if(t==="shipsrc")switch(e){case"1":n=$.i18n.prop("func_filter_shipsrc_1");break;case"2":n=$.i18n.prop("func_filter_shipsrc_2")}return n},_initSubMenuEvts:function(){var e=this,t=this.menu.getContainer();t.find(".func_filter_shiptype").html($.i18n.prop("func_filter_shiptype")),t.find(".func_filter_shipflag").html($.i18n.prop("func_filter_shipflag")),t.find(".func_filter_shipsta").html($.i18n.prop("func_filter_shipsta")),t.find(".func_filter_shipsrc").html($.i18n.prop("func_filter_shipsrc")),t.find(".submenu_glxs .submenu_glxs_li").on("click",function(){$(this).hasClass("active")?($(this).find(".filter_ul").css("display","none"),$(this).find(".arrowImg").attr("src","themes/images/frame/arrow_down.png"),$(this).removeClass("active")):($(this).find(".filter_ul").css("display","block"),$(this).find(".arrowImg").attr("src","themes/images/frame/arrow_up.png"),$(this).addClass("active").siblings().removeClass("active"),$(this).siblings().find(".filter_ul").css("display","none"),$(this).siblings().find(".arrowImg").attr("src","themes/images/frame/arrow_down.png"))}),t.find(".submenu_glxs .filter_ul").on("click",function(e){e.stopPropagation()}),t.find(".submenu_glxs .shipTypeList>li>input[type=checkbox]").on("click",function(t){var n=$(this).val();if(this.checked)e.shipTypeList.push(n);else{var r=e.shipTypeList.indexOf(n);r!==-1&&e.shipTypeList.splice(r,1)}e.updateShowTarget()}),t.find(".submenu_glxs .shipFlagList>li>input[type=checkbox]").on("click",function(t){var n=$(this).val();if(this.checked)e.shipFlagList.push(n);else{var r=e.shipFlagList.indexOf(n);r!==-1&&e.shipFlagList.splice(r,1)}e.updateShowTarget()}),t.find(".submenu_glxs .shipStateList>li>input[type=checkbox]").on("click",function(t){var n=$(this).val();if(this.checked)e.shipStateList.push(n);else{var r=e.shipStateList.indexOf(n);r!==-1&&e.shipStateList.splice(r,1)}e.updateShowTarget()}),t.find(".submenu_glxs .shipSourceList>li>input[type=checkbox]").on("click",function(t){var n=$(this).val();if(this.checked)e.shipSourceList.push(n);else{var r=e.shipSourceList.indexOf(n);r!==-1&&e.shipSourceList.splice(r,1)}e.updateShowTarget()})},updateShowTarget:function(){this.ictmap.realtarget.isRealTargetShow()&&this.ictmap.realtarget.updateFilterLayer()}})})});