define("func/userLogin",["leaflet","func/base","data/ajax","func/changepsw"],function(e){e.ICT.Func.add("UserLogin",{Class:e.Class.extend({initialize:function(){this.ajax=new e.ICT.Ajax,this.sessionStorage=e.ict.app.sessionStorage,this.dialog=e.ict.app.util.dialog},start:function(){window.location.href="userpages/login.html"},stop:function(){},afterLoginFunc:function(){var e=this.sessionStorage.getItem("userInfo");$(".userName_txt").html(e.userName),$(".userlogin").css("display","none"),$(".userlogin_after").css("display","block"),this._initUserLoginAfterEvts()},_initUserLoginAfterEvts:function(){var t=this;$(".userlogin_after_exitlogin").on("click",function(){t.dialog.confirm($.i18n.prop("dialog_alert_title"),$.i18n.prop("func_userlogin_exit_confirm"),function(){$(".userName_txt").html(""),$(".userlogin").css("display","block"),$(".userlogin_after").css("display","none"),t.sessionStorage.removeItem("userInfo")})}),$(".userlogin_after_changepsw").on("click",function(){e.ICT.Func.ChangePsw.run()})},isLogin:function(){return!!this.sessionStorage.getItem("userInfo")},alertLoginDialog:function(){if(this.isLogin())return;this._loginpanel&&(this._loginpanel.remove(),this._loginpanel=null);var t={title:$.i18n.prop("dialog_alert_title"),width:340,height:140,ismodal:!0,contentHTML:this.getContentHtml()},n=this._loginpanel=new e.ICT.PopPanel(t);n.show();var r=this._loginpanel.getContainer();r.find(".func_userlogin_remind1").html($.i18n.prop("func_userlogin_remind1")),r.find(".func_userlogin_remind2").html($.i18n.prop("func_userlogin_remind2")),r.find(".func_userlogin_remind3").html($.i18n.prop("func_userlogin_remind3")),r.find(".func_userlogin_remind4").html($.i18n.prop("func_userlogin_remind4")),r.find(".func_userlogin_remind5").html($.i18n.prop("func_userlogin_remind5")),r.find("label").css({"font-weight":"normal","font-size":"14px"})},getContentHtml:function(){var e=[];return e.push('<div class="row login_block_container">'),e.push('<div class="col-md-3"><img src="themes/images/dialog/error.png"></div>'),e.push('<div class="col-md-9">'),e.push('<label class="func_userlogin_remind1">该功能需要登录后才能操作！</label>'),e.push("<br>"),e.push('<label class="func_userlogin_remind2">请</label>&nbsp;<a href="userpages/login.html" target="_self" class="func_userlogin_remind3">登录</a>&nbsp;<label class="func_userlogin_remind4">或</label>&nbsp;<a href="userpages/enroll.html" target="_blank" class="func_userlogin_remind5">免费注册</a>'),e.push("</div>"),e.push("</div>"),e.join("")}})})});